var __LIB=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});const r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:Function("return this;")()}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);const r="[object Object]",i=Function.call.bind(Object.prototype.toString),s=Function.call.bind(Object.prototype.hasOwnProperty);var o,a=function e(t,...n){let o,a,c=t||{},l=n.length,d=!1;for("boolean"==typeof t&&(d=t,c=n.shift()||{},l=n.length),o=0;o<l;o++)if(n[o])for(a in n[o])s(n[o],a)&&(d&&i(c[a])===r&&i(n[o][a])===r?c[a]=e(!0,c[a],n[o][a]):c[a]=n[o][a]);return c};"undefined"==typeof WeakMap?function(){var e=Object.defineProperty,t=Date.now()%1e9,n=o=function(){this.name="__st"+(1e9*Math.random()>>>0)+t+++"__"};n.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=void 0,!0)},has:function(e){var t=e[this.name];return!!t&&t[0]===e}},window.WeakMap=n}():o=WeakMap;var c={stash:new o,create:function(){return new o}},l=n(0);const d=Function.bind.call.bind(Function.bind)(Function.call.bind,Function.call),u=Object.defineProperty,h=Object.defineProperties,p=Object.keys,f=[],_=Array.isArray,v=(d(f.forEach),d(f.indexOf)),y=d(f.splice),g=console.log,b=(console.error,console.warn,"undefined"!=typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"),m=HTMLElement.prototype,w=document;w.head,d(m.appendChild),d(m.insertBefore),d(m.hasAttribute),d(m.setAttribute),d(m.removeAttribute);function E(e,t){u(this,"_",{value:{keys:e.slice(0),values:t?t.slice(0):null,idx:0,total:e.length}})}h(E.prototype,{constructor:{value:E},next:{enumerable:!0,configurable:!0,value(){const e={done:this._.idx===this._.total};if(e.done)return e.value=void 0,e;const t=this._.idx++;return e.value=this._.keys[t],this._.values&&(e.value=[e.value,this._.values[t]]),e}}}),u(E.prototype,b,{value(){return this}});const D=l.a.Set&&l.a.Set.prototype[b]?l.a.Set:k;var x=D;function k(){}h(k.prototype,{constructor:{value:k,configurable:!0},_:{get(){const e=[];return u(this,"_",{value:e}),e}},add:{value(e){return-1===v(this._,e)&&this._.push(e),this}},has:{value(e){return-1!==v(this._,e)}},size:{get(){return this._.length}},clear:{value(){this._.splice(0)}},delete:{value(e){const t=v(this._,e);return-1!==t&&(this._.splice(t,1),!0)}},values:{value(){return new E(this._)}},entries:{value(){return new E(this._,this._)}},forEach:{value(e,t){this._.forEach(t=>e(t,t,this),t)}},[b]:{value(){return this.values()}}});const N=new D;let C;var B=function(e){"function"==typeof e&&(N.add(e),C||(C=setTimeout(A,0)))};function A(){const e=[...N];let t;for(N.clear(),C=null;t=e.shift();)t(),t=null}const O=c.create(),I=["destroy","remove","off"];function $(e){let t,n=[];for(t in e)n.push(t);return n}const S={isDestroyed:!1,init(){},destroy(e){if(O.has(this)){let t=O.get(this);O.delete(this),e?t.forEach(L):B(()=>t.forEach(L))}"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy(e){(function(e){O.has(e)||O.set(e,[]);return O.get(e)})(this).push(e)},getFactory(){if(this.constructor)return this.constructor}},j={extend:function(...e){let t=class extends(this){};return a(t.prototype,e.reduce(function(e,t){if(t){const n=t.prototype||t;$(n).forEach(function(t){e[t]=n[t]})}return e},{})),t},isInstanceOf:function(e){return!!e&&!$(this.prototype).some(function(t){return void 0===e[t]})},create:function(){return new this(...arguments)},getDestroyCallback:function(e,t){return()=>{e&&Object.keys(e).forEach(function(t){e[t]&&(I.some(n=>{if(e[t][n]&&("remove"!==n||!(e[t]instanceof Node)))return e[t][n](),!0}),e[t]=void 0)}),t&&t.has&&t.has(e)&&t.delete(e)}}};function L(e){"function"==typeof e&&e()}const T=function(){function e(...t){return this&&this.constructor&&this instanceof this.constructor?this.init(...t):new e(...t)}return e.prototype.constructor=e,e}();a(T.prototype,S),a(T,j);var P=T;let M=/native code/i,F=function(){if("undefined"!=typeof setImediate&&M.test(setImediate.toString()))return setImediate;if("function"==typeof Promise&&M.test(Promise.toString())){let e=Promise.resolve();return function(t){e.then(t).catch(e=>console.error(e))}}let e=[],t=!1;return function(n){e.push(n),t||(t=!0,function n(){setTimeout(function(){e.shift()(),e.length?n():t=!1},0)}())}}(),H=!1;const V=new Set;let W,K;const R=()=>{const e=[...V];for(V.clear(),H=!1,W=0,K=e.length;W<K;W++)e[W]()};F.queue=(e=>{V.add(e),H||(H=!0,F(R))});var G=F;const z="___$observable$___",Q={configurable:!0,enumerable:!0},U=new x,q="___$watching$___",J="__$watchable$__",X=`__$is${J}`,Y=["pop","push","shift","splice","unshift","sort","reverse"],Z=e=>e&&"[object Object]"===Object.prototype.toString.call(e),ee=new x;let te=!1;function ne(e,t,n){e[z]||re(e),t&&!e[z].props[t]?(se(e,t),oe(e,t)):t&&e[z].props[t].setupInterceptors&&oe(e,t),t&&n?e[z].props[t].storeCallback(n):t||(ae(e,!1),n&&e[z].storeCallback(n));const r=function(e,t){e&&(t.dependents&&(t.dependents.delete(e),_e(e,t.dependents)),t.watchers.delete(e),_e(e,t.watchers))}.bind(e,n,t?e[z].props[t]:e[z]);return r.destroy=r,r}function re(e){e[z]||(u(e,z,{configurable:!0,writable:!0,deep:!1,value:{props:{},dependents:new x,watchers:new x,storeCallback:he}}),ie(e[z].dependents,!1),ie(e[z].watchers,!0))}function ie(e,t=!1){e.async=t,e.isQueued=!1,e.notify=ce}function se(e,t){return e[z].props[t]||(e[z].props[t]={val:void 0,dependents:new x,watchers:new x,parent:e[z],storeCallback:he,setupInterceptors:!0,deep:e[z].deep},ie(e[z].props[t].dependents,!1),ie(e[z].props[t].watchers,!0)),e[z].props[t]}function oe(e,t){const n=Object.getOwnPropertyDescriptor(e,t)||Q;n.get||(e[z].props[t].val=e[t],e[z].props[t].deep&&ae(e[z].props[t].val)),u(e,t,{configurable:n.configurable||!1,enumerable:n.enumerable||!1,get:()=>(U.size&&U.forEach(e[z].props[t].storeCallback,e[z].props[t]),n.get?n.get.call(e):e[z].props[t].val),set(r){const i=e[t];return n.set?r=n.set.call(e,r):e[z].props[t].val=r,e[z].props[t].deep&&ae(r),r!==i&&(e[z].props[t].watchers.notify(),e[z].props[t].dependents.notify(),e[z].watchers.notify()),r}}),e[z].props[t].setupInterceptors=!1,n===Q&&e[z].watchers.notify()}function ae(e,t=!0,n=!1){return Z(e)||_(e)?(e[z]||(Z(e)?re(e):_(e)&&ve(e)),n||!e[z].deep?(t&&(e[z].deep=!0),_(e)?function(e,t){for(let n=0,r=e.length;n<r;n++)ae(e[n],!0,t)}(e):function(e,t){const n=p(e);for(let r=0,i=n.length;r<i;r++)e[z].props[n[r]]||(se(e,n[r]),oe(e,n[r])),e[z].props[n[r]].deep&&!t||(e[z].props[n[r]].deep=!0,Z(e[n[r]])&&ae(e[n[r]],!0,t))}(e),e):void 0):e}function ce(){this.size&&(this.async?this.forEach(le):this.forEach(de),function(e){e&&le(e);if(te||!ee.size)return;te=!0,G(ue)}())}function le(e){ee.add(e)}function de(e){e()}function ue(){const e=[...ee];ee.clear(),te=!1;for(let t=0,n=e.length;t<n;t++)e[t]();e.length=0}function he(e){e.asDependent&&this.dependents?(fe(e,this.dependents),this.dependents.add(e)):(fe(e,this.watchers),this.watchers.add(e))}function pe(e){U.delete(e)}function fe(e,t){e[q]||(u(e,q,{configurable:!0,writable:!0,value:{watching:new x}}),u(e,"stopWatchingAll",{configurable:!0,writable:!0,value(){e[q].watching.forEach(t=>t.delete(e)),e[q].watching.clear()}})),e[q].watching.add(t)}function _e(e,t){e[q]&&e[q].watching.delete(t)}function ve(e){if(e[z]||re(e),e[X])return;const t=e.__proto__;if(!t[J]){const e=Object.create(t);Y.forEach(n=>{u(e,n,{configurable:!0,writable:!0,value:function(...e){const r=t[n].call(this,...e);return this[z].dependents.notify(),this[z].watchers.notify(),r}})}),u(e,"size",{configurable:!0,get(){return U.size&&U.forEach(this[z].storeCallback,this[z]),this.length}}),u(e,X,{value:!0}),u(t,J,{configurable:!0,writable:!0,value:e})}e.__proto__=t[J]}const ye=l.a.Map&&l.a.Map.prototype[b]?l.a.Map:ge;function ge(){}h(ge.prototype,{constructor:{value:ge,configurable:!0},_:{get(){return u(this,"_",{value:{keys:[],values:[]}}),this._}},get:{value(e){return this._.values[v(this._.keys,e)]}},set:{value(e,t){return-1===v(this._.keys,e)&&(this._.keys.push(e),this._.values.push(t)),this}},has:{value(e){return-1!==v(this._.keys,e)}},size:{get(){return this._.keys.length}},clear:{value(){y(this._.keys,0),y(this._.values,0)}},delete:{value(e){const t=v(this._.keys,e);return-1!==t&&(y(this._.keys,t,1),y(this._.values,t,1),!0)}},keys:{value(){return new E(this._.keys)}},values:{value(){return new E(this._.values)}},entries:{value(){return new E(this._.keys,this._.values)}},forEach:{value(e,t){this._.keys.forEach((t,n)=>e(this._.values[n],t,this),t)}},[b]:{value(){return this.entries()}}});const be=document,me=Function,we=Element.prototype,Ee=Array.prototype,De=new ye,xe=me.bind.call.bind(me.bind),ke="DomDataBind",Ne=c.create(),Ce=`D-${Date.now()}-${Math.random().toString(36).replace(/[^a-z0-9]+/g,"")}`,Be=xe(me.call.bind,me.call),Ae=e=>"[object Object]"===Object.prototype.toString.call(e),Oe=Be(Ee.forEach),Ie=Be(Ee.slice),$e=Be(we.hasAttribute),Se=Be(we.getAttribute),je=Be(we.setAttribute),Le=Be(we.removeAttribute),Te=Be(we.insertBefore),Pe=Be(we.removeChild),Me=xe(be.createComment,be),Fe=xe(be.createTextNode,be),He=xe(be.createDocumentFragment,be),Ve=xe(console.error,console);function We(e){if(e=e.trim(),De.has(e))return De.get(e);const t=new me("$data",`\nwith ($data) {\n    if ($data) {\n        with ($data) {\n            return ${e};\n        }\n    } \n    else {\n        return ${e};\n    }\n}\n`);return De.set(e,t),t}function Ke(e){const t=[],n=e.attributes.length;for(let r=0;r<n;r++)t.push(e.attributes.item(r).name);return t}var Re=function(e,t){return Array.prototype.slice.call(e.querySelectorAll(t))};var Ge=class extends P{static has(){return""}static manages(){return!1}render(e,t,n){let r=Ne.get(e);r||(r={data:null,value:"",isQueued:!1,deferUpd:this.update.bind(this,e),tracker:()=>this.render(e,t,r.data)},Ne.set(e,r)),r.data!==n&&(r.tracker.stopWatchingAll&&r.tracker.stopWatchingAll(),r.data=n),r.isQueued||(r.isQueued=!0,G(r.deferUpd))}update(e){if(e.isDestroyed)return;const t=Ne.get(e);if(t){let n="";!function(e){U.add(e)}(t.tracker);try{n=this._tokenValueGetter(t.data||{}),e.update&&e.update(n)}catch(e){Ve(e)}pe(t.tracker),t.isQueued=!1,t.value!==n&&(t.value=n)}}getNodeHandler(e){return this._attr&&8!==e.nodeType&&Le(e,this._attr),new ze(this,e)}};class ze extends P{init(e,t){this._d=e,this._n=t}destroy(){const e=Ne.get(this);e&&(e.tracker&&e.tracker.stopWatchingAll&&e.tracker.stopWatchingAll(),e.data&&(e.data=null)),super.destroy(),Ne.delete(this)}render(e){this._d.render(this,this._n,e)}update(e){const t=Ne.get(this);if(t&&t.update)return t.update(e)}}var Qe=class extends Ge{init(e){this._tokenText=e,this._tokenValueGetter=We(e)}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);r.update||(r.update=(e=>{e!==t.nodeValue&&(t.nodeValue=e)}))}getNodeHandler(e){if(8===e.nodeType&&e.nodeValue===Ce){const t=e;e=e.parentNode.insertBefore(document.createTextNode(""),t),t.parentNode.removeChild(t)}return super.getNodeHandler(e)}};const Ue=(()=>{const e=He();return e.appendChild(Fe("test")),e.appendChild(Fe("")),1===e.cloneNode(!0).childNodes.length})(),qe=(()=>{const e=document.createElement("div"),t=Fe("test");return e.appendChild(t),!e.contains(t)})(),Je=Be(Text.prototype.splitText),Xe=new RegExp("{{(.*?)}}"),Ye=new RegExp("{{(.*?)}}","g"),Ze=e=>e?e.nodeValue:"",et=e=>Xe.test(Ze(e));var tt=class{constructor(e,t=[]){this._template=document.createElement("template"),this._template.innerHTML=e,this._directives=t,this._bindings=nt(this._template.content,t)}cloneWith(e={}){ae(e);const t=document.importNode(this._template.content,!0);return t[ke]=new dt(t,rt(t,this._bindings,this._directives)),t[ke].setData(e),t}};function nt(e,t){const n=new Map,r=new Map,i=new Set;let s;const o=e=>{let t,n,o,a=s;for(;t=e.has(s);)if(n=Se(s,t),(o=e.manages())&&(a=Me("")),it(r,a).push(ot(e,t,n)),Le(s,t),o){i.add(s),s.parentNode.insertBefore(a,s);const e=document.createElement("div");e.appendChild(s),a.data=e.innerHTML}return o};return function(e){return[e].concat(Re(e,"*")).reduce(ct,[]).filter(at)}(e).forEach(e=>{let n=!1;if(i.size)for(let t of i.values())if(qe&&3===e.nodeType?16&t.compareDocumentPosition(e)&&(n=!0):t.contains(e)&&(n=!0),n)break;s=e,n||(1===e.nodeType?t.some(o):3===e.nodeType&&(e=>{if(et(e)){Ye.lastIndex=0;let t=Ze(e),n=Ye.exec(t);for(;n;)if(t==="{{"+n[1]+"}}")it(r,e).push(st(Qe,n[1])),n=null;else{let t=Je(e,n.index);Ue&&lt(e),e=Je(t,n[0].length);const i=t.parentNode.insertBefore(Me(Ce),t);t.parentNode.removeChild(t),it(r,i).push(st(Qe,n[1])),Ye.lastIndex=0,!(n=Ye.exec(Ze(e)))&&Ue&&lt(e)}}})(e))}),s=null,r.forEach((t,r)=>{if(e===r)return void n.set([],t);const i=[];let s=r,o=s.parentNode;for(;s!==e;)i.unshift(i.indexOf.call(o.childNodes,s)),o=(s=s.parentNode).parentNode;n.set(i,t)}),r.clear(),i.clear(),n}function rt(e,t,n){const r=[];return t.forEach((t,i)=>{const s=function(e,t){if(!t.length)return e;return Oe(t,t=>e=e.childNodes[t]),e}(e,i);if(s)for(let e=0,i=t.length;e<i;e++)r.push(t[e].getNodeHandler(s,n));else Ve(new Error("dom-data-bind#render(): Unable to find node!"))}),r}function it(e,t){return e.has(t)||e.set(t,[]),e.get(t)}function st(e,t){t=t.trim();let n=Ne.get(e);return n||(n={},Ne.set(e,n)),n[t]||(n[t]=new e(t)),n[t]}function ot(e,t,n){n=n.trim();const r=`${t}-${Ce}-${n}`;let i=Ne.get(e);return i||(i={},Ne.set(e,i)),i[r]||(i[r]=new e(t,n)),i[r]}function at(e){return 1!==e.nodeType||1===e.nodeType&&e.attributes.length>0}function ct(e,t){if(e.push(t),t.hasChildNodes())for(t=t.firstChild;t;){const n=t.nextSibling;3===t.nodeType&&t.nodeValue&&Xe.test(Ze(t))&&e.push(t),Ue&&lt(t),t=n}return e}function lt(e){3===e.nodeType&&Ue&&!e.nodeValue&&(e.parentNode.insertBefore(Me(""),e),e.parentNode.removeChild(e))}class dt{constructor(e,t){this._frag=e,this._bindings=t}destroy(){if(this._bindings){for(let e=0,t=this._bindings.length;e<t;e++)this._bindings[e].destroy();this._bindings.length=0}}setData(e){for(let t=0,n=this._bindings.length;t<n;t++)this._bindings[t].render(e)}}const ut=new Map;function ht(e,t,n){return ut.has(e)||ut.set(e,new tt(e,n)),ut.get(e).cloneWith(t)}var pt=ht;const ft=P.extend({$ele:null,init(e,t){const n=this.getFactory(),r={html:e,data:t,directives:n.directives.slice(0)};Ne.set(this,r),(e=>"string"==typeof e)(e)?(this.$ele=ht(e,t,r.directives),r.bindings=this.$ele._domDataBindNodeHandlers):(this.$ele=e,r.bindings=rt(e,nt(e,r.directives),r.directives),t&&this.setData(t)),this.onDestroy(()=>{Oe(r.bindings,e=>e.destroy()),delete r.data,delete r.directives,delete r.bindings,n.getDestroyCallback(r,Ne)()})},setData(e){ae(e);const t=Ne.get(this).bindings;Oe(t,t=>t.render(e))}});var _t=ft;ft.directives=[];var vt=function(e,t){return!(!e||!t)&&e.classList.contains(t)};var yt=function(e,t){let n=String(t).trim().split(/\s+/).map(e=>e.trim());e&&n.length&&n.forEach(t=>e.classList.add(t))};var gt=function(e,t){return e.classList.remove(t)};const bt="_class";var mt=class extends Ge{static has(e){return $e(e,bt)?bt:""}init(e,t){this._attr=e,this._tokenValueGetter=We(t||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);r.update||(r.update=(e=>(function(e,t={},n={}){Object.keys(t).concat(Object.keys(n)).forEach(n=>{t[n]&&!vt(e,n)?yt(e,n):!t[n]&&vt(e,n)&&gt(e,n)})})(t,e,e!==r.value?r.value:{})))}};const wt="_style";var Et=class extends Ge{static has(e){return $e(e,wt)?wt:""}init(e,t){this._attr=e,this._tokenValueGetter=We(t||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);if(!r.update){const e=t.style;r.update=(t=>{Object.keys(t).forEach(n=>{e[n]!==t[n]&&(e[n]=t[n])})})}}};const Dt="_if";function xt(e){this.value!==e&&(e&&!this.renderedEle?(this.renderedEle=ht(this.renderTemplate,this.data,this.directives),this.renderedEle._children=Ie(this.renderedEle.childNodes,0),Te(this.insertEle.parentNode,this.renderedEle,this.insertEle)):!e&&this.renderedEle&&this.destroyRenderedEle())}function kt(){this.renderedEle&&(this.renderedEle._children.forEach(e=>e.parentNode&&e.parentNode.removeChild(e)),this.renderedEle[ke].destroy(),this.renderedEle=null)}var Nt=class extends Ge{static has(e){return $e(e,Dt)?Dt:""}static manages(){return!0}init(e,t){this._attr=e,this._tokenValueGetter=We(t||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);r.update||(r.renderedEle=null,r.insertEle=e._placeholderEle,r.directives=e._directives,r.destroyRenderedEle=kt,r.renderTemplate=e._n.data,r.update=xt,e.onDestroy(()=>r.destroyRenderedEle()))}getNodeHandler(e,t){const n=super.getNodeHandler(e);return n._placeholderEle=Me(""),n._directives=t,Te(e.parentNode,n._placeholderEle,e),Pe(e.parentNode,e),n}};const Ct="_show",Bt="none";var At=class extends Ge{static has(e){return $e(e,Ct)?Ct:""}init(e,t){this._attr=e,this._tokenValueGetter=We(t||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);if(!r.update){const e=t.style,n=t.display||"";r.update=(t=>{t?e.display=n:e.display!==Bt&&(e.display=Bt)})}}};const Ot=/^_attr\.(.*)/;var It=class extends Ge{static get _matches(){return Ot}static get _isProp(){return!1}static has(e){let t="";return Ke(e).some(e=>this._matches.test(e)&&(t=e)),t}init(e,t){this._attr=e,this._tokenValueGetter=We(t||""),this._htmlAttr=new RegExp(this.constructor._matches).exec(e)[1]}render(e,t,n){super.render(e,t,n);let r=Ne.get(e);r.update||(r.update=(e=>{this.constructor._isProp?e!==r.value&&(t[this._htmlAttr]=e):e&&r.value!==e?je(t,this._htmlAttr,e):r.value&&!e&&Le(t,this._htmlAttr)}))}};const $t=/^_prop\.(.*)/;var St=class extends It{static get _matches(){return $t}static _isProp(){return!0}};var jt=function(e,t,n,r){let i=t.split(/\s+/),s={};return i.forEach(t=>{e.addEventListener(t,n,r),s[t]={remove:()=>e.removeEventListener(t,n,r)}}),Object.create({listeners:s,remove:function(){i.forEach(e=>s[e].remove())}})};const Lt=new RegExp(`^${(e=>String(e).replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&"))("_on.")}(.*)`);var Tt=class extends Ge{static has(e){let t="";return Ke(e).some(e=>Lt.test(e)&&(t=e)),t}init(e,t){this._attr=e,this._eventName=new RegExp(Lt).exec(e)[1],this._tokenValueGetter=We(t||"")}handleEvent(e,t){const n=Ne.get(e);let r;n.data.$ev=t;try{r=this._tokenValueGetter(n.data)}catch(e){return void Ve(e)}if(delete n.data.$ev,"function"==typeof r)return r.call(e._n,t);r&&"function"===r.handleEvent&&r.handleEvent.call(r,t)}render(e,t,n){let r=Ne.get(e);r||(r={data:{$data:{}},tracker:()=>this.render(e,t,r.data)},Ne.set(e,r)),n&&(n.$data?r.data=n:r.data.$data=n)}getNodeHandler(e){const t=super.getNodeHandler(e),n=jt(e,this._eventName,this.handleEvent.bind(this,t));return t.onDestroy(()=>n.remove()),t}};function Pt(e,t){e[z]||ve(e),t&&e[z].storeCallback(t);const n=()=>e[z].watchers.delete(t);return n.destroy=n,n}const Mt="_each",Ft="_key",Ht=()=>{},Vt=e=>Array.isArray(e)&&!e.length||Ae(e)&&!Object.keys(e).length;function Wt(){for(let e=0,t=this._children.length;e<t;e++)this._children[e].parentNode&&this._children[e].parentNode.removeChild(this._children[e]);this._loop.rowKey&&this._state.bindersByKey.delete(this._loop.rowKey),this._state=null,this[ke].destroy()}var Kt=class extends Ge{static has(e){return $e(e,Mt)?Mt:""}static manages(){return!0}init(e,t){const[n,r]=function(e){let t=/\(?(.+?)\)?\W?(?:of|in)\W(.*)/.exec(e);return t?((t=t.slice(1))[0]=t[0].split(/,/).map(e=>String(e).trim()),t):[]}((t||"").trim());this._attr=e,this._iteratorArgs=n,this._tokenValueGetter=We(r||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);r.update||(r.binders=[],r.bindersByKey=new ye,r.listIterator=(()=>this.iterateOverList(e,r.value)),r.isFirstRender=!0,r.usesKey=!1,r.getKey=Ht,r.update=(t=>{t!==r.value&&(r.value&&(r.value=null,r.listIterator.stopWatchingAll&&r.listIterator.stopWatchingAll()),t?(pe(r.tracker),r.value=t,ae(t),Array.isArray(t)?Pt(t,r.listIterator):Ae(t)&&ne(t,null,r.listIterator),Vt(t)&&r.binders?this.destroyChildBinders(r.binders,e):this.iterateOverList(e,t)):this.destroyChildBinders(r.binders,e))}),e.onDestroy(()=>{r.listIterator.stopWatchingAll&&r.listIterator.stopWatchingAll(),r.bindersByKey.clear(),this.destroyChildBinders(r.binders,e)}))}destroyChildBinders(e,t){if(e&&e.length)if(e=e.splice(0),t._isSoleChild){const n=t._placeholderEle.parentNode;n.textContent="",n.appendChild(t._placeholderEle),setTimeout(()=>{Oe(e,e=>e._destroy())})}else Oe(e,e=>e._destroy())}getDataForIteration(e,t){return this._iteratorArgs.reduce((t,n)=>(t[n]=e.shift(),t),t||{})}iterateOverList(e,t){const n=Ne.get(e),r=[],i=He();let s,o=Array.isArray(t);if(o)o=!0,s=t;else{if(!Ae(t))return;s=Object.keys(t)}for(let a=0,c=s.length;a<c;a++){let c={$data:n.data.$data||n.data};o?this.getDataForIteration([s[a],a],c):this.getDataForIteration([t[s[a]],s[a],a],c);const l=this.getRowBinder(e,c);l._loop.pos=a,r.push(l),i.appendChild(l)}i.hasChildNodes()&&Te(e._placeholderEle.parentNode,i,e._placeholderEle),Oe(n.binders.splice(0,n.binders.length,...r),e=>{-1===r.indexOf(e)&&e._destroy()}),n.binders.length&&this.positionChildren(e._placeholderEle.parentNode,e._placeholderEle,n.binders)}getRowBinder(e,t){const n=Ne.get(e);let r,i=null,s=n.getKey(t);return s&&(r=n.bindersByKey.get(s)),r?(delete t.$data,r[ke].setData(t),i=r):(r=ht(e._n.data,t,e._directives),n.isFirstRender&&(n.isFirstRender=!1,1===r.childNodes.length&&1===r.firstChild.nodeType&&$e(r.firstChild,Ft)&&(n.usesKey=!0,n.getKey=We(Se(r.firstChild,Ft)),s=n.getKey(t))),n.usesKey&&Le(r.firstChild,Ft),r._children=Ie(r.childNodes,0),r._destroy=Wt,r._state=n,r._loop={rowEle:r,rowKey:s,pos:-1},s&&n.bindersByKey.set(s,r),i=r)}positionChildren(e,t,n){Oe(n,(r,i)=>{r._loop.pos!==i&&(Te(e,r._loop.rowEle,n[i+1]?n[i+1]._loop.rowEle:t),r._loop.pos=i)})}getNodeHandler(e,t){const n=super.getNodeHandler(e);return n._directives=t,n._placeholderEle=Me(""),n._isSoleChild=function(e){return Array.prototype.every.call(e.parentNode.childNodes,t=>t===e||3===t.nodeType&&!t.textContent.trim())}(e),Te(e.parentNode,n._placeholderEle,e),Pe(e.parentNode,e),n}};const Rt="_html";var Gt=class extends Ge{static has(e){return $e(e,Rt)?Rt:""}init(e,t){this._attr=e,this._tokenValueGetter=We(t||"")}render(e,t,n){super.render(e,t,n);const r=Ne.get(e);r.update||(r.update=(e=>{e!==r.value&&(t.innerHTML=e)}))}};n.d(t,"DomDataBindAll",function(){return Qt}),n.d(t,"allDirectives",function(){return zt}),n.d(t,"DomDataBind",function(){return _t}),n.d(t,"render",function(){return pt}),n.d(t,"Directive",function(){return Ge}),n.d(t,"EachDirective",function(){return Kt}),n.d(t,"IfDirective",function(){return Nt}),n.d(t,"ClassDirective",function(){return mt}),n.d(t,"StyleDirective",function(){return Et}),n.d(t,"ShowDirective",function(){return At}),n.d(t,"AttrDirective",function(){return It}),n.d(t,"PropDirective",function(){return St}),n.d(t,"OnDirective",function(){return Tt}),n.d(t,"HtmlDirective",function(){return Gt});const zt=[Kt,Nt,mt,Et,At,It,St,Tt,Gt],Qt=_t.extend();Qt.directives=zt;t.default=Qt}]);export default __LIB.default;export const DomDataBindAll=__LIB.DomDataBindAll;export const DomDataBind=__LIB.DomDataBind;export const render=__LIB.render;export const allDirectives=__LIB.allDirectives;export const Directive=__LIB.Directive;export const EachDirective=__LIB.EachDirective;export const IfDirective=__LIB.IfDirective;export const ClassDirective=__LIB.ClassDirective;export const StyleDirective=__LIB.StyleDirective;export const ShowDirective=__LIB.ShowDirective;export const AttrDirective=__LIB.AttrDirective;export const PropDirective=__LIB.PropDirective;export const OnDirective=__LIB.OnDirective;export const HtmlDirective=__LIB.HtmlDirective;
//# sourceMappingURL=dom-data-bind.esm.min.js.map
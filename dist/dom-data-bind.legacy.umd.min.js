!function(t,e,n,r,i,o,u,a,s,c,l,f,h,d,v,p,y,_,g,m,b,k,w,D,E){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DomDataBind=e():t.DomDataBind=e()}(t,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||c.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&c.defineProperty(t,Symbol.toStringTag,{value:"Module"}),c.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=c.create(null);if(n.r(r),c.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return c.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"===c(r.a)(Symbol.iterator)?function(t){return c(r.a)(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":c(r.a)(t)})(t)}function o(t){return(o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}},function(e,n,r){"use strict";(function(e){r.d(n,"a",function(){return o});var i=r(0),o="undefined"!==(void 0===t?"undefined":c(i.a)(t))?t:"undefined"!==(void 0===e?"undefined":c(i.a)(e))?e:"undefined"!==("undefined"==typeof self?"undefined":c(i.a)(self))?self:l("return this;")()}).call(this,r(2))},function(e,n,r){"use strict";r.r(n),function(e){var n,i=r(0);n=function(){return this}();try{n=n||l("return this")()||(0,eval)("this")}catch(e){"object"===(void 0===t?"undefined":c(i.a)(t))&&(n=t)}e.exports=n}.call(this,r(3)(e))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=c.create(t);e.children||(e.children=[]),c.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),c.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),c.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(n,i,a){"use strict";a.r(i);var f={};function h(t,e){return(h=c.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return(v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return o.prototype.toString.call(Reflect.construct(o,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(l.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function _(t,e){if(!(t instanceof e))throw new p("Cannot call a class as a function")}a.r(f),a.d(f,"AttrDirective",function(){return ke}),a.d(f,"ClassDirective",function(){return Ne}),a.d(f,"EachDirective",function(){return $e}),a.d(f,"HtmlDirective",function(){return Be}),a.d(f,"IfDirective",function(){return Oe}),a.d(f,"OnDirective",function(){return Ve}),a.d(f,"PropDirective",function(){return Le}),a.d(f,"ShowDirective",function(){return We}),a.d(f,"StyleDirective",function(){return Fe});var g=a(0);function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return!e||"object"!==c(g.a)(e)&&"function"!=typeof e?m(t):e}function k(t){return(k=c.setPrototypeOf?c.getPrototypeOf:function(t){return t.__proto__||c.getPrototypeOf(t)})(t)}function w(t,e){if("function"!=typeof e&&null!==e)throw new p("Super expression must either be null or a function");t.prototype=c.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}var x=l.bind.call.bind(l.bind),N=x(l.call.bind,l.call),S=N(c.prototype.toString),C=function(t){return"[object Object]"===S(t)},T=function(t){return"[object String]"===S(t)},A=c.defineProperty,P=c.defineProperties,H=c.keys,$=[],I=s.isArray,M=N($.forEach),B=N($.indexOf),O=N($.splice),K=N($.slice),R=D.log,V=D.error||R,j=(D.warn,"undefined"!=typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"),L=HTMLElement.prototype,W=e,G=(W.head,function(t){return W.createElement(t)}),F=function(t){return W.createTextNode(t||"")},z=(N(L.appendChild),N(L.insertBefore),N(L.hasAttribute)),U=N(L.getAttribute),q=N(L.setAttribute),J=N(L.removeAttribute);var Q,X=function t(e){for(var n=e||{},r=arguments.length,i=new s(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var u,a,c=i.length,l=!1;for("boolean"==typeof e&&(l=e,n=i.shift()||{},c=i.length),u=0;u<c;u++)if(i[u])for(a in i[u])i[u].hasOwnProperty(a)&&(l&&C(n[a])&&C(i[u][a])?n[a]=t(!0,n[a],i[u][a]):n[a]=i[u][a]);return n};"undefined"==typeof WeakMap?function(){var e=c.defineProperty,n=o.now()%1e9,r=Q=function(){this.name="__st"+(1e9*d.random()>>>0)+n+++"__"};r.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:E},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=E,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},t.WeakMap=r}():Q=WeakMap;var Y={stash:new Q,create:function(){return new Q}};function Z(t){return function(t){if(s.isArray(t)){for(var e=0,n=new s(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in c(t)||"[object Arguments]"===c.prototype.toString.call(t))return s.from(t)}(t)||function(){throw new p("Invalid attempt to spread non-iterable instance")}()}function tt(t,e,n){return e in t?c.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et=a(1);function nt(t,e){A(this,"_",{value:{keys:t.slice(0),values:e?e.slice(0):null,idx:0,total:t.length}})}P(nt.prototype,{constructor:{value:nt},next:{enumerable:!0,configurable:!0,value:function(){var t={done:this._.idx===this._.total};if(t.done)return t.value=E,t;var e=this._.idx++;return t.value=this._.keys[e],this._.values&&(t.value=[t.value,this._.values[e]]),t}}}),A(nt.prototype,j,{value:function(){return this}});var rt=et.a.Set&&et.a.Set.prototype[j]?et.a.Set:it;function it(){}P(it.prototype,tt({constructor:{value:it,configurable:!0},_:{get:function(){var t=[];return A(this,"_",{value:t}),t}},add:{value:function(t){return-1===B(this._,t)&&this._.push(t),this}},has:{value:function(t){return-1!==B(this._,t)}},size:{get:function(){return this._.length}},clear:{value:function(){this._.splice(0)}},delete:{value:function(t){var e=B(this._,t);return-1!==e&&(this._.splice(e,1),!0)}},values:{value:function(){return new nt(this._)}},entries:{value:function(){return new nt(this._,this._)}},forEach:{value:function(t,e){var n=this;this._.forEach(function(e){return t(e,e,n)},e)}}},j,{value:function(){return this.values()}}));var ot,ut=new rt;var at=function(t){"function"==typeof t&&(ut.add(t),ot||(ot=r(st,0)))};function st(){var t,e=Z(ut);for(ut.clear(),ot=null;t=e.shift();)t(),t=null}var ct=Y.create(),lt=["destroy","remove","off"];function ft(t){var e,n=[];for(e in t)n.push(e);return n}var ht={isDestroyed:!1,init:function(){},destroy:function(t){if(ct.has(this)){var e=ct.get(this);ct.delete(this),t?e.forEach(vt):at(function(){return e.forEach(vt)})}"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy:function(t){(function(t){ct.has(t)||ct.set(t,[]);return ct.get(t)})(this).push(t)},getFactory:function(){if(this.constructor)return this.constructor}},dt={extend:function(){for(var t=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,t),e}(this),e=arguments.length,n=new s(e),r=0;r<e;r++)n[r]=arguments[r];return X(t.prototype,n.reduce(function(t,e){if(e){var n=e.prototype||e;ft(n).forEach(function(e){t[e]=n[e]})}return t},{})),t},isInstanceOf:function(t){return!!t&&!ft(this.prototype).some(function(e){return void 0===t[e]})},create:function(){return v(this,s.prototype.slice.call(arguments))},getDestroyCallback:function(t,e){return function(){t&&c.keys(t).forEach(function(e){t[e]&&(lt.some(function(n){if(t[e][n]&&("remove"!==n||!(t[e]instanceof Node)))return t[e][n](),!0}),t[e]=E)}),e&&e.has&&e.has(t)&&e.delete(t)}}};function vt(t){"function"==typeof t&&t()}var pt=function(){function t(){for(var e=arguments.length,n=new s(e),r=0;r<e;r++)n[r]=arguments[r];return this&&this.constructor&&this instanceof this.constructor?this.init.apply(this,n):v(t,n)}return t.prototype.constructor=t,t}();X(pt.prototype,ht),X(pt,dt);var yt=pt,_t=et.a.Map&&et.a.Map.prototype[j]?et.a.Map:gt;function gt(){}P(gt.prototype,tt({constructor:{value:gt,configurable:!0},_:{get:function(){return A(this,"_",{value:{keys:[],values:[]}}),this._}},get:{value:function(t){return this._.values[B(this._.keys,t)]}},set:{value:function(t,e){return-1===B(this._.keys,t)&&(this._.keys.push(t),this._.values.push(e)),this}},has:{value:function(t){return-1!==B(this._.keys,t)}},size:{get:function(){return this._.keys.length}},clear:{value:function(){O(this._.keys,0),O(this._.values,0)}},delete:{value:function(t){var e=B(this._.keys,t);return-1!==e&&(O(this._.keys,e,1),O(this._.values,e,1),!0)}},keys:{value:function(){return new nt(this._.keys)}},values:{value:function(){return new nt(this._.values)}},entries:{value:function(){return new nt(this._.keys,this._.values)}},forEach:{value:function(t,e){var n=this;this._.keys.forEach(function(e,r){return t(n._.values[r],e,n)},e)}}},j,{value:function(){return this.entries()}}));var mt=e,bt=l,kt=Element.prototype,wt=new _t,Dt=1,Et="DomDataBind",xt=Y.create(),Nt="D-".concat(o.now(),"-").concat(d.random().toString(36).replace(/[^a-z0-9]+/g,"")),St=N,Ct=C,Tt=N(kt.removeChild),At=x(mt.createComment,mt),Pt=function(t){var e=S(t);return"[object HTMLTemplateElement]"===e||"[object HTMLUnknownElement]"===e&&!!t.content},Ht=V;function $t(t){var e=arguments.length>1&&arguments[1]!==E?arguments[1]:"runtime";if(t=t.trim(),wt.has(t))return wt.get(t);var n=new bt("$DATA","\nwith ($DATA) {\n    if ($DATA.$data) {\n        with ($DATA.$data) {\n            return (".concat(t,");\n        }\n    } \n    return (").concat(t,");\n}\n//# sourceURL=valueGetter:").concat(e,".").concat(Dt++,".js"));return wt.set(t,n),n}function It(t){for(var e=[],n=t.attributes.length,r=0;r<n;r++)e.push(t.attributes.item(r).name);return e}var Mt=function(t,e){return s.prototype.slice.call(t.querySelectorAll(e))},Bt=1,Ot=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},Kt=function(){var e,n=0;for(e in t)n++;return n}(),Rt=Ot((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+Kt.toString(36),4),Vt=c.create({generate:function(){var t=(new o).getTime().toString(36),e=Ot((Bt++).toString(36),4),n="xxxxxxxx".replace(/[x]/g,function(){return(16*d.random()|0).toString(16)});return"c"+t+e+Rt+n}});function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),c.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e&&jt(t.prototype,e),n&&jt(t,n),t}function Wt(t,e,n){return(Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!c.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var i=c.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var Gt=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,yt),Lt(e,[{key:"init",value:function(t,e,n){this._directives=n,this._d=this._directive=t,this._n=this._node=e}},{key:"destroy",value:function(){var t=xt.get(this);t&&(t.tracker&&t.tracker.stopWatchingAll&&t.tracker.stopWatchingAll(),t.data&&(t.data=null)),Wt(k(e.prototype),"destroy",this).call(this),xt.delete(this)}},{key:"render",value:function(t){this._d.render(this,this._n,t)}},{key:"update",value:function(){}}]),e}(),Ft=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,yt),Lt(e,[{key:"render",value:function(t,e,n){var r=this,i=xt.get(t);i||(i={data:null,value:"",isQueued:!1,tracker:function(){return r.render(t,e,i.data)}},xt.set(t,i)),i.data!==n&&(i.tracker.stopWatchingAll&&i.tracker.stopWatchingAll(),i.data=n),this.update(t)}},{key:"update",value:function(t){if(!t.isDestroyed){var e=xt.get(t);if(e){var n="";try{n=this._tokenValueGetter(e.data||{}),t.update&&t.update(n)}catch(t){Ht(t)}e.value!==n&&(e.value=n)}}}},{key:"cleanNode",value:function(t){this._attr&&8!==t.nodeType&&J(t,this._attr)}},{key:"getNodeHandler",value:function(t,e){return this.cleanNode(t),new this.constructor.NodeHandlerConstructor(this,t,e)}}],[{key:"has",value:function(){return""}},{key:"manages",value:function(){return!1}}]),e}();tt(Ft,"NodeHandlerConstructor",Gt);var zt=Ft;function Ut(t,e){return e&&e.parentNode&&e.parentNode.insertBefore&&e.parentNode.insertBefore(t,e),t}var qt=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t){this._tokenText=t,this._tokenValueGetter=$t(t,"text")}},{key:"getNodeHandler",value:function(t){if(8===t.nodeType&&t.nodeValue===Nt){var n=t;t=Ut(F(""),n),n.parentNode.removeChild(n)}return Wt(k(e.prototype),"getNodeHandler",this).call(this,t)}}]),e}();tt(qt,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"update",value:function(t){t!==this._node.nodeValue&&(this._node.nodeValue=t)}}]),e}());var Jt=qt,Qt=function(){var t=W.createDocumentFragment();return t.appendChild(F("test")),t.appendChild(F("")),1===t.cloneNode(!0).childNodes.length}(),Xt=function(){var t=G("div"),e=F("test");return t.appendChild(e),!t.contains(e)}(),Yt=St(Text.prototype.splitText),Zt=new RegExp("{{(.*?)}}"),te=new RegExp("{{(.*?)}}","g"),ee=function(t){return t?t.nodeValue:""},ne=function(t){return Zt.test(ee(t))},re=function t(e){var n=arguments.length>1&&arguments[1]!==E?arguments[1]:[];_(this,t),this.id=Vt.generate(),Pt(e)?this.ele=e:(this.ele=G("template"),this.ele.innerHTML=e),this._directives=n,this._bindings=oe(this.ele.content,n)},ie=re;function oe(t,e){var n,r=new Map,i=new Map,o=new Set,u=function(t){for(var e,r,u,a=n;e=t.has(n);)if(r=U(n,e),(u=t.manages())&&(a=At("")),ae(i,a).push(ce(t,e,r)),J(n,e),u){o.add(n),n.parentNode.insertBefore(a,n);var s=G("div");s.appendChild(n),a.data=s.innerHTML}return u};return function(t){return[t].concat(Mt(t,"*")).reduce(fe,[]).filter(le)}(t).forEach(function(t){var r=!1;if(o.size){var a=!0,s=!1,c=E;try{for(var l,f=o.values()[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;if(Xt&&3===t.nodeType?16&h.compareDocumentPosition(t)&&(r=!0):h.contains(t)&&(r=!0),r)break}}catch(t){s=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(s)throw c}}}n=t,r||(1===t.nodeType?e.some(u):3===t.nodeType&&function(t){if(ne(t)){te.lastIndex=0;for(var e=ee(t),n=te.exec(e);n;)if(e==="{{"+n[1]+"}}")ae(i,t).push(se(Jt,n[1])),n=null;else{var r=Yt(t,n.index);Qt&&he(t),t=Yt(r,n[0].length);var o=r.parentNode.insertBefore(At(Nt),r);r.parentNode.removeChild(r),ae(i,o).push(se(Jt,n[1])),te.lastIndex=0,!(n=te.exec(ee(t)))&&Qt&&he(t)}}}(t))}),n=null,i.forEach(function(e,n){if(t!==n){for(var i=[],o=n,u=o.parentNode;o!==t;)i.unshift(i.indexOf.call(u.childNodes,o)),u=(o=o.parentNode).parentNode;r.set(i,e)}else r.set([],e)}),i.clear(),o.clear(),r}function ue(t,e,n){var r=[];return e.forEach(function(e,i){var o=function(t,e){if(!e.length)return t;return M(e,function(e){return t=t.childNodes[e]}),t}(t,i);if(o)for(var u=0,a=e.length;u<a;u++)r.push(e[u].getNodeHandler(o,n));else Ht(new y("dom-data-bind#render(): Unable to find node!"))}),r}function ae(t,e){return t.has(e)||t.set(e,[]),t.get(e)}function se(t,e){e=e.trim();var n=xt.get(t);return n||(n={},xt.set(t,n)),n[e]||(n[e]=new t(e)),n[e]}function ce(t,e,n){n=n.trim();var r="".concat(e,"-").concat(Nt,"-").concat(n),i=xt.get(t);return i||(i={},xt.set(t,i)),i[r]||(i[r]=new t(e,n)),i[r]}function le(t){return 1!==t.nodeType||1===t.nodeType&&t.attributes.length>0}function fe(t,e){if(t.push(e),e.hasChildNodes())for(e=e.firstChild;e;){var n=e.nextSibling;3===e.nodeType&&e.nodeValue&&Zt.test(ee(e))&&t.push(e),Qt&&he(e),e=n}return t}function he(t){3===t.nodeType&&Qt&&!t.nodeValue&&(t.parentNode.insertBefore(At(""),t),t.parentNode.removeChild(t))}var de=new Map;function ve(t){var e=arguments.length>1&&arguments[1]!==E?arguments[1]:ve.directives||[],n=T(t)?t:t.innerHTML;return pe(n)||de.set(n,new ie(t,e)),de.get(n)}function pe(t){return de.has(t)}ve.directives=null,ve.has=pe;var ye=function(){function t(e,n){var r=arguments.length>2&&arguments[2]!==E?arguments[2]:"";_(this,t),this._frag=e,this._bindings=n,this._childNodes=K(e.childNodes,0),this.fromTemplateId=r}return Lt(t,[{key:"recover",value:function(){var t=this;this._childNodes.forEach(function(e){return t._frag.appendChild(e)})}},{key:"destroy",value:function(){if(this._bindings){for(var t=0,e=this._bindings.length;t<e;t++)this._bindings[t].destroy();this._bindings.length=0}}},{key:"setData",value:function(t){for(var e=0,n=this._bindings.length;e<n;e++)this._bindings[e].render(t)}}]),t}();function _e(t,n,r){var i=t instanceof re?t:ve(t,r),o=e.importNode(i.ele.content,!0);return o[Et]=new ye(o,ue(o,i._bindings,i._directives),i.id),o[Et].setData(n),o}var ge=_e,me=yt.extend({$ele:null,init:function(t,e){var n=this.getFactory(),r={html:t,data:e,directives:n.directives.slice(0)};xt.set(this,r),T(t)?(this.$ele=_e(t,e,r.directives),r.bindings=this.$ele._bindings):(this.$ele=t,r.bindings=ue(t,oe(t,r.directives),r.directives),e&&this.setData(e)),this.onDestroy(function(){M(r.bindings,function(t){return t.destroy()}),delete r.data,delete r.directives,delete r.bindings,n.getDestroyCallback(r,xt)()})},setData:function(t){var e=xt.get(this).bindings;M(e,function(e){return e.render(t)})}}),be=me;me.directives=[];var ke=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","attr"),this._htmlAttr=new RegExp(this.constructor._matches).exec(t)[1]}}],[{key:"has",value:function(t){var e=this,n="";return It(t).some(function(t){return e._matches.test(t)&&(n=t)}),n}}]),e}();tt(ke,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"update",value:function(t){var e=xt.get(this),n=this._directive._htmlAttr;this._directive.constructor._isProp?t!==e.value&&(this._node[n]=t):t&&e.value!==t?q(this._node,n,t):e.value&&!t&&J(this._node,n)}}]),e}()),tt(ke,"_matches",/^_attr\.(.*)/),tt(ke,"_isProp",!1);var we=ke;var De=function(t,e){return!(!t||!e)&&t.classList.contains(e)};var Ee=function(t,e){var n=u(e).trim().split(/\s+/).map(function(t){return t.trim()});t&&n.length&&n.forEach(function(e){return t.classList.add(e)})};var xe=function(t,e){return t.classList.remove(e)},Ne=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","class")}}],[{key:"has",value:function(t){return z(t,"_class")?"_class":""}}]),e}();tt(Ne,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"update",value:function(t){var e=this._node,n=xt.get(this).value||{};c.keys(t).concat(c.keys(n)).forEach(function(n){t[n]&&!De(e,n)?Ee(e,n):!t[n]&&De(e,n)&&xe(e,n)})}}]),e}());function Se(t,e){return function(t){if(s.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=E;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new p("Invalid attempt to destructure non-iterable instance")}()}var Ce=Symbol("directive.each.setup"),Te="_key",Ae=function(t){return t._destroy()},Pe=function(t){return t},He=function(t){function e(){var t,n;_(this,e);for(var r=arguments.length,i=new s(r),o=0;o<r;o++)i[o]=arguments[o];return tt(m(m(n=b(this,(t=k(e)).call.apply(t,[this].concat(i))))),"binders",[]),tt(m(m(n)),"bindersByKey",new _t),tt(m(m(n)),"listIterator",function(){return n._directive.iterateOverList(m(m(n)),xt.get(m(m(n))).value)}),n}return w(e,Gt),Lt(e,[{key:"init",value:function(t,n,r){Wt(k(e.prototype),"init",this).call(this,t,n,r),this._placeholderEle=At("directive.each"),this._isSoleChild=function(t){return s.prototype.every.call(t.parentNode.childNodes,function(e){return e===t||3===e.nodeType&&!e.textContent.trim()})}(this._node),this._viewTemplate=ve(n.data,r),this._viewTemplate[Ce]||function(t){if(!t[Ce]){t[Ce]={usesKey:!1,getKey:Pe};var e=t.ele.content.firstChild;e&&e.hasAttribute&&z(e,Te)&&(t[Ce].usesKey=!0,t[Ce].getKey=$t(U(e,Te),"each.key"),J(e,Te))}}(this._viewTemplate),Ut(this._placeholderEle,n),Tt(n.parentNode,n)}},{key:"update",value:function(t){var e=xt.get(this);t!==e.value&&(e.value=null,this.listIterator.stopWatchingAll&&this.listIterator.stopWatchingAll()),t?(e.value=t,function(t){return I(t)&&!t.length||Ct(t)&&!H(t).length}(t)&&this.binders?this._directive.destroyChildBinders(this.binders,this):this.listIterator()):this._directive.destroyChildBinders(this.binders,this)}},{key:"destroy",value:function(){this.listIterator.stopWatchingAll&&this.listIterator.stopWatchingAll(),this.bindersByKey.clear(),this._directive.destroyChildBinders(this.binders,this),Wt(k(e.prototype),"destroy",this).call(this)}}]),e}(),$e=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){var n=Se(function(t){var e=/\(?(.+?)\)?\W?(?:of|in)\W(.*)/.exec(t);if(e)return(e=e.slice(1))[0]=e[0].split(/,/).map(function(t){return u(t).trim()}),e;return[]}((e||"").trim()),2),r=n[0],i=n[1];this._attr=t,this._iteratorArgs=r,this._tokenValueGetter=$t(i||"","each")}},{key:"destroyChildBinders",value:function(t,e){if(t&&t.length)if(t=t.splice(0),e._isSoleChild){var n=e._placeholderEle.parentNode;n.textContent="",n.appendChild(e._placeholderEle),r(function(){M(t,function(t){return t._destroy()})})}else M(t,function(t){return t._destroy()})}},{key:"getDataForIteration",value:function(t,e){return this._iteratorArgs.reduce(function(e,n){return e[n]=t.shift(),e},e||{})}},{key:"iterateOverList",value:function(t,e){var n,r=xt.get(t),i=I(e);if(i)i=!0,n=e;else{if(!Ct(e))return;n=H(e)}for(var o=t.binders,u=new _t,a=n.length,s=t._viewTemplate[Ce],c=s.usesKey,l=s.getKey,f=0;f<a;f++){var h={$root:r.data.$root||r.data,$parent:r.data,$data:r.data.$data||r.data};i?this.getDataForIteration([n[f],f],h):this.getDataForIteration([e[n[f]],n[f],f],h);var d=l(c?h:i?n[f]:e[n[f]]);if(o[f]&&o[f]._loop.rowKey===d)o[f][Et].setData(h);else{o[f]&&(o[f][Et].recover(),u.set(o[f]._loop.rowKey,o[f]),o[f]=null);var v=t.bindersByKey.get(d);if(v?null!==v._loop.pos&&o[v._loop.pos]===v&&(o[v._loop.pos]=null):(v=u.get(d))&&u.delete(d),v)o[f]=v,v._loop.pos=f,o[f][Et].recover(),Ie(o,f,t._placeholderEle),o[f][Et].setData(h);else{if(u.size){var p=Se(u.entries().next().value,2),y=p[0];(v=p[1])[Et].setData(h),u.delete(y),v._loop.rowKey=d,v._loop.pos=f}else(v=_e(t._viewTemplate,h,t._directives))._destroy=Me,v._handler=t,v._loop={rowKey:d,pos:f};o[f]=v,t.bindersByKey.set(d,v),Ie(o,f,t._placeholderEle)}}}u.size&&(M(u.values(),Ae),u.clear()),a<o.length&&M(O(o,a),Ae)}}],[{key:"has",value:function(t){return z(t,"_each")?"_each":""}},{key:"manages",value:function(){return!0}}]),e}();function Ie(t,e,n){var r=t[e];r[Et].recover(),t[e+1]?Ut(r,t[e+1][Et]._childNodes[0]):Ut(r,n)}function Me(){this[Et].recover(),this._loop.rowKey&&this._handler.bindersByKey.delete(this._loop.rowKey),this[Et].destroy()}tt($e,"NodeHandlerConstructor",He);var Be=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","html")}}],[{key:"has",value:function(t){return z(t,"_html")?"_html":""}}]),e}();tt(Be,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"update",value:function(t){t!==xt.get(this).value&&(this._node.innerHTML=t)}}]),e}());var Oe=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","if")}}],[{key:"has",value:function(t){return z(t,"_if")?"_if":""}},{key:"manages",value:function(){return!0}}]),e}();tt(Oe,"NodeHandlerConstructor",function(t){function e(){var t,n;_(this,e);for(var r=arguments.length,i=new s(r),o=0;o<r;o++)i[o]=arguments[o];return tt(m(m(n=b(this,(t=k(e)).call.apply(t,[this].concat(i))))),"_renderedEle",null),tt(m(m(n)),"_renderTemplate",n._node.data),n}return w(e,Gt),Lt(e,[{key:"init",value:function(){for(var t,n=arguments.length,r=new s(n),i=0;i<n;i++)r[i]=arguments[i];(t=Wt(k(e.prototype),"init",this)).call.apply(t,[this].concat(r)),this._placeholderEle=At("directive.if"),Ut(this._placeholderEle,this._node),Tt(this._node.parentNode,this._node)}},{key:"update",value:function(t){var e=xt.get(this);e.value!==t?t&&!this._renderedEle?(this._renderedEle=_e(this._renderTemplate,e.data,this._directives),Ut(this._renderedEle,this._placeholderEle)):t||this.destroy_renderedEle():this._renderedEle&&this._renderedEle[Et].setData(e.data)}},{key:"destroy_renderedEle",value:function(){this._renderedEle&&(this._renderedEle[Et].recover(),this._renderedEle[Et].destroy(),this._renderedEle=null)}}]),e}());var Ke=function(t,e,n,r){var i=e.split(/\s+/),o={};return i.forEach(function(e){t.addEventListener(e,n,r),o[e]={remove:function(){return t.removeEventListener(e,n,r)}}}),c.create({listeners:o,remove:function(){i.forEach(function(t){return o[t].remove()})}})},Re=new RegExp("^".concat(function(t){return u(t).replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}("_on."),"(.*)")),Ve=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._eventName=new RegExp(Re).exec(t)[1],this._tokenValueGetter=$t(e||"","on")}},{key:"handleEvent",value:function(t,e){var n,r=xt.get(t);r.data.$ev=e;try{n=this._tokenValueGetter(r.data)}catch(t){return void Ht(t)}if(delete r.data.$ev,"function"==typeof n)return n.call(t._n,e);n&&"function"===n.handleEvent&&n.handleEvent.call(n,e)}},{key:"render",value:function(t,e,n){var r=this,i=xt.get(t);i||(i={data:{$data:{}},tracker:function(){return r.render(t,e,i.data)}},xt.set(t,i)),n&&(n.$data?i.data=n:i.data.$data=n)}},{key:"getNodeHandler",value:function(t){var n=Wt(k(e.prototype),"getNodeHandler",this).call(this,t),r=Ke(t,this._eventName,this.handleEvent.bind(this,n));return n.onDestroy(function(){return r.remove()}),n}}],[{key:"has",value:function(t){var e="";return It(t).some(function(t){return Re.test(t)&&(e=t)}),e}}]),e}(),je=/^_prop\.(.*)/,Le=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,we),Lt(e,null,[{key:"_isProp",value:function(){return!0}},{key:"_matches",get:function(){return je}}]),e}(),We=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","show")}}],[{key:"has",value:function(t){return z(t,"_show")?"_show":""}}]),e}();tt(We,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"init",value:function(){for(var t,n=arguments.length,r=new s(n),i=0;i<n;i++)r[i]=arguments[i];(t=Wt(k(e.prototype),"init",this)).call.apply(t,[this].concat(r)),this._origDisplayStyle=this._node.style.display||""}},{key:"update",value:function(t){var e=this._node.style;t?e.display=this._origDisplayStyle:"none"!==e.display&&(e.display="none")}}]),e}());function Ge(t,e){t&&"object"===c(g.a)(e)&&c.keys(e).forEach(function(n){t.style[n]=e[n]})}var Fe=function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,zt),Lt(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=$t(e||"","style")}}],[{key:"has",value:function(t){return z(t,"_style")?"_style":""}}]),e}();tt(Fe,"NodeHandlerConstructor",function(t){function e(){return _(this,e),b(this,k(e).apply(this,arguments))}return w(e,Gt),Lt(e,[{key:"update",value:function(t){Ge(this._node,t)}}]),e}());a.d(i,"DomDataBindAll",function(){return ze}),a.d(i,"AttrDirective",function(){return ke}),a.d(i,"ClassDirective",function(){return Ne}),a.d(i,"EachDirective",function(){return $e}),a.d(i,"HtmlDirective",function(){return Be}),a.d(i,"IfDirective",function(){return Oe}),a.d(i,"OnDirective",function(){return Ve}),a.d(i,"PropDirective",function(){return Le}),a.d(i,"ShowDirective",function(){return We}),a.d(i,"StyleDirective",function(){return Fe}),a.d(i,"DomDataBind",function(){return be}),a.d(i,"render",function(){return ge}),a.d(i,"allDirectives",function(){return f}),a.d(i,"Directive",function(){return zt});var ze=be.extend();ze.directives=f;i.default=ze}])})}(window,document,location,setTimeout,setInterval,Date,String,Number,Array,Object,Function,atob,btoa,Math,JSON,TypeError,Error,encodeURIComponent,decodeURIComponent,requestAnimationFrame,CustomEvent,clearInterval,clearTimeout,console);
//# sourceMappingURL=dom-data-bind.legacy.umd.min.js.map
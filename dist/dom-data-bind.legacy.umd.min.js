!function(t,e,n,r,o,i,u,a,c,f,l,s,p,y,h,d,v,b,_,m,g,w,S,k,P){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DomDataBind=e():t.DomDataBind=e()}(t,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||f.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(t,Symbol.toStringTag,{value:"Module"}),f.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=f.create(null);if(n.r(r),f.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return f.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n,r){"use strict";(function(e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(n,"a",function(){return i});var i="undefined"!==(void 0===t?"undefined":o(t))?t:"undefined"!==(void 0===e?"undefined":o(e))?e:"undefined"!==("undefined"==typeof self?"undefined":o(self))?self:l("return this;")()}).call(this,r(1))},function(e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o=function(){return this}();try{o=o||l("return this")()||(0,eval)("this")}catch(e){"object"===(void 0===t?"undefined":r(t))&&(o=t)}e.exports=o},function(n,o,a){"use strict";a.r(o);var s=l.bind.call.bind(l.bind),p=s(l.call.bind,l.call),h=p(f.prototype.toString),b=function(t){return"[object Object]"===h(t)},_=function(t){return"[object String]"===h(t)},m=f.defineProperty,g=f.defineProperties,w=f.keys,S=[],O=c.isArray,E=p(S.forEach),x=p(S.indexOf),D=p(S.splice),C=p(S.slice),N=k.log,R=k.error||N,T=(k.warn,"undefined"!=typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"),A=HTMLElement.prototype,$=e,j=($.head,function(t){return $.createElement(t)}),H=function(t){return $.createTextNode(t||"")},M=(p(A.appendChild),p(A.insertBefore),p(A.hasAttribute)),B=p(A.getAttribute),I=p(A.setAttribute),K=p(A.removeAttribute);var V,L=function t(e){for(var n=e||{},r=arguments.length,o=new c(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var u,a,f=o.length,l=!1;for("boolean"==typeof e&&(l=e,n=o.shift()||{},f=o.length),u=0;u<f;u++)if(o[u])for(a in o[u])o[u].hasOwnProperty(a)&&(l&&b(n[a])&&b(o[u][a])?n[a]=t(!0,n[a],o[u][a]):n[a]=o[u][a]);return n};"undefined"==typeof WeakMap?function(){var e=f.defineProperty,n=i.now()%1e9,r=V=function(){this.name="__st"+(1e9*y.random()>>>0)+n+++"__"};r.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:P},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=P,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},t.WeakMap=r}():V=WeakMap;var W={stash:new V,create:function(){return new V}},G=a(0);function F(t,e){m(this,"_",{value:{keys:t.slice(0),values:e?e.slice(0):null,idx:0,total:t.length}})}g(F.prototype,{constructor:{value:F},next:{enumerable:!0,configurable:!0,value:function(){var t={done:this._.idx===this._.total};if(t.done)return t.value=P,t;var e=this._.idx++;return t.value=this._.keys[e],this._.values&&(t.value=[t.value,this._.values[e]]),t}}}),m(F.prototype,T,{value:function(){return this}});var z=G.a.Set&&G.a.Set.prototype[T]?G.a.Set:U;function U(){}function q(t){return function(t){if(c.isArray(t)){for(var e=0,n=new c(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in f(t)||"[object Arguments]"===f.prototype.toString.call(t))return c.from(t)}(t)||function(){throw new d("Invalid attempt to spread non-iterable instance")}()}g(U.prototype,function(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({constructor:{value:U,configurable:!0},_:{get:function(){var t=[];return m(this,"_",{value:t}),t}},add:{value:function(t){return-1===x(this._,t)&&this._.push(t),this}},has:{value:function(t){return-1!==x(this._,t)}},size:{get:function(){return this._.length}},clear:{value:function(){this._.splice(0)}},delete:{value:function(t){var e=x(this._,t);return-1!==e&&(this._.splice(e,1),!0)}},values:{value:function(){return new F(this._)}},entries:{value:function(){return new F(this._,this._)}},forEach:{value:function(t,e){var n=this;this._.forEach(function(e){return t(e,e,n)},e)}}},T,{value:function(){return this.values()}}));var J,Q=new z;var X=function(t){"function"==typeof t&&(Q.add(t),J||(J=r(Y,0)))};function Y(){var t,e=q(Q);for(Q.clear(),J=null;t=e.shift();)t(),t=null}function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e,n){return(tt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return i.prototype.toString.call(Reflect.construct(i,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(l.bind.apply(t,r));return n&&rt(o,n.prototype),o}).apply(null,arguments)}function et(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function rt(t,e){return(rt=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=W.create(),it=["destroy","remove","off"];function ut(t){var e,n=[];for(e in t)n.push(e);return n}var at={isDestroyed:!1,init:function(){},destroy:function(t){if(ot.has(this)){var e=ot.get(this);ot.delete(this),t?e.forEach(ft):X(function(){return e.forEach(ft)})}"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy:function(t){(function(t){ot.has(t)||ot.set(t,[]);return ot.get(t)})(this).push(t)},getFactory:function(){if(this.constructor)return this.constructor}},ct={extend:function(){for(var t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,e),et(this,nt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(e,t),e}(this),e=arguments.length,n=new c(e),r=0;r<e;r++)n[r]=arguments[r];return L(t.prototype,n.reduce(function(t,e){if(e){var n=e.prototype||e;ut(n).forEach(function(e){t[e]=n[e]})}return t},{})),t},isInstanceOf:function(t){return!!t&&!ut(this.prototype).some(function(e){return void 0===t[e]})},create:function(){return tt(this,c.prototype.slice.call(arguments))},getDestroyCallback:function(t,e){return function(){t&&f.keys(t).forEach(function(e){t[e]&&(it.some(function(n){if(t[e][n]&&("remove"!==n||!(t[e]instanceof Node)))return t[e][n](),!0}),t[e]=P)}),e&&e.has&&e.has(t)&&e.delete(t)}}};function ft(t){"function"==typeof t&&t()}var lt=function(){function t(){for(var e=arguments.length,n=new c(e),r=0;r<e;r++)n[r]=arguments[r];return this&&this.constructor&&this instanceof this.constructor?this.init.apply(this,n):tt(t,n)}return t.prototype.constructor=t,t}();L(lt.prototype,at),L(lt,ct);var st=lt;var pt=G.a.Map&&G.a.Map.prototype[T]?G.a.Map:yt;function yt(){}g(yt.prototype,function(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({constructor:{value:yt,configurable:!0},_:{get:function(){return m(this,"_",{value:{keys:[],values:[]}}),this._}},get:{value:function(t){return this._.values[x(this._.keys,t)]}},set:{value:function(t,e){return-1===x(this._.keys,t)&&(this._.keys.push(t),this._.values.push(e)),this}},has:{value:function(t){return-1!==x(this._.keys,t)}},size:{get:function(){return this._.keys.length}},clear:{value:function(){D(this._.keys,0),D(this._.values,0)}},delete:{value:function(t){var e=x(this._.keys,t);return-1!==e&&(D(this._.keys,e,1),D(this._.values,e,1),!0)}},keys:{value:function(){return new F(this._.keys)}},values:{value:function(){return new F(this._.values)}},entries:{value:function(){return new F(this._.keys,this._.values)}},forEach:{value:function(t,e){var n=this;this._.keys.forEach(function(e,r){return t(n._.values[r],e,n)},e)}}},T,{value:function(){return this.entries()}}));var ht=e,dt=l,vt=Element.prototype,bt=new pt,_t=1,mt="DomDataBind",gt=W.create(),wt="D-".concat(i.now(),"-").concat(y.random().toString(36).replace(/[^a-z0-9]+/g,"")),St=p,kt=b,Pt=p(vt.removeChild),Ot=s(ht.createComment,ht),Et=function(t){var e=h(t);return"[object HTMLTemplateElement]"===e||"[object HTMLUnknownElement]"===e&&!!t.content},xt=R;function Dt(t){var e=arguments.length>1&&arguments[1]!==P?arguments[1]:"runtime";if(t=t.trim(),bt.has(t))return bt.get(t);var n=new dt("$$DATA$$","\nwith ($$DATA$$) {\n    if ($$DATA$$.$data) {\n        with ($$DATA$$.$data) {\n            return (".concat(t,");\n        }\n    } \n    return (").concat(t,");\n}\n//# sourceURL=valueGetter:").concat(e,".").concat(_t++,".js"));return bt.set(t,n),n}function Ct(t){for(var e=[],n=t.attributes.length,r=0;r<n;r++)e.push(t.attributes.item(r).name);return e}var Nt=function(t,e){return c.prototype.slice.call(t.querySelectorAll(e))},Rt=1,Tt=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},At=function(){var e,n=0;for(e in t)n++;return n}(),$t=Tt((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+At.toString(36),4),jt=f.create({generate:function(){var t=(new i).getTime().toString(36),e=Tt((Rt++).toString(36),4),n="xxxxxxxx".replace(/[x]/g,function(){return(16*y.random()|0).toString(16)});return"c"+t+e+$t+n}});function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Bt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t,e,n){return(It="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kt(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Kt(t){return(Kt=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,e),Bt(this,Kt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(e,st),function(t,e,n){e&&Mt(t.prototype,e),n&&Mt(t,n)}(e,[{key:"init",value:function(t,e,n){this._directives=n,this._d=this._directive=t,this._n=this._node=e}},{key:"destroy",value:function(){var t=gt.get(this);t&&(t.tracker&&t.tracker.stopWatchingAll&&t.tracker.stopWatchingAll(),t.data&&(t.data=null)),It(Kt(e.prototype),"destroy",this).call(this),gt.delete(this)}},{key:"render",value:function(t){this._d.render(this,this._n,t)}},{key:"update",value:function(){}}]),e}();function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Ft(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zt(t){return(zt=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,e),Ft(this,zt(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,st),function(t,e,n){e&&Gt(t.prototype,e),n&&Gt(t,n)}(e,[{key:"render",value:function(t,e,n){var r=this,o=gt.get(t);o||(o={data:null,value:"",isQueued:!1,tracker:function(){return r.render(t,e,o.data)}},gt.set(t,o)),o.data!==n&&(o.tracker.stopWatchingAll&&o.tracker.stopWatchingAll(),o.data=n),this.update(t)}},{key:"update",value:function(t){if(!t.isDestroyed){var e=gt.get(t);if(e){var n="";try{n=this._tokenValueGetter(e.data||{}),t.update&&t.update(n)}catch(t){xt(t)}e.value!==n&&(e.value=n)}}}},{key:"cleanNode",value:function(t){this._attr&&8!==t.nodeType&&K(t,this._attr)}},{key:"getNodeHandler",value:function(t,e){return this.cleanNode(t),new this.constructor.NodeHandlerConstructor(this,t,e)}}],[{key:"has",value:function(){return""}},{key:"manages",value:function(){return!1}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(qt,"NodeHandlerConstructor",Lt);var Jt=qt;function Qt(t,e){return e&&e.parentNode&&e.parentNode.insertBefore&&e.parentNode.insertBefore(t,e),t}function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yt(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function te(t,e,n){return e&&Zt(t.prototype,e),n&&Zt(t,n),t}function ee(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t,e,n){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=re(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function re(t){return(re=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function oe(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}function ie(t,e){return(ie=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){function e(){return Yt(this,e),ee(this,re(e).apply(this,arguments))}return oe(e,Jt),te(e,[{key:"init",value:function(t){this._tokenText=t,this._tokenValueGetter=Dt(t,"text")}},{key:"getNodeHandler",value:function(t){if(8===t.nodeType&&t.nodeValue===wt){var n=t;t=Qt(H(""),n),n.parentNode.removeChild(n)}return ne(re(e.prototype),"getNodeHandler",this).call(this,t)}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(ue,"NodeHandlerConstructor",function(t){function e(){return Yt(this,e),ee(this,re(e).apply(this,arguments))}return oe(e,Lt),te(e,[{key:"update",value:function(t){t!==this._node.nodeValue&&(this._node.nodeValue=t)}}]),e}());var ae=ue;var ce=function(){var t=$.createDocumentFragment();return t.appendChild(H("test")),t.appendChild(H("")),1===t.cloneNode(!0).childNodes.length}(),fe=function(){var t=j("div"),e=H("test");return t.appendChild(e),!t.contains(e)}(),le=St(Text.prototype.splitText),se=new RegExp("{{(.*?)}}"),pe=new RegExp("{{(.*?)}}","g"),ye=function(t){return t?t.nodeValue:""},he=function(t){return se.test(ye(t))},de=function t(e){var n=arguments.length>1&&arguments[1]!==P?arguments[1]:[];!function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,t),this.id=jt.generate(),Et(e)?this.ele=e:(this.ele=j("template"),this.ele.innerHTML=e),this._directives=n,this._bindings=be(this.ele.content,n)},ve=de;function be(t,e){var n,r=new Map,o=new Map,i=new Set,u=function(t){for(var e,r,u,a=n;e=t.has(n);)if(r=B(n,e),(u=t.manages())&&(a=Ot("")),me(o,a).push(we(t,e,r)),K(n,e),u){i.add(n),n.parentNode.insertBefore(a,n);var c=j("div");c.appendChild(n),a.data=c.innerHTML}return u};return function(t){return[t].concat(Nt(t,"*")).reduce(ke,[]).filter(Se)}(t).forEach(function(t){var r=!1;if(i.size){var a=!0,c=!1,f=P;try{for(var l,s=i.values()[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var p=l.value;if(fe&&3===t.nodeType?16&p.compareDocumentPosition(t)&&(r=!0):p.contains(t)&&(r=!0),r)break}}catch(t){c=!0,f=t}finally{try{a||null==s.return||s.return()}finally{if(c)throw f}}}n=t,r||(1===t.nodeType?e.some(u):3===t.nodeType&&function(t){if(he(t)){pe.lastIndex=0;for(var e=ye(t),n=pe.exec(e);n;)if(e==="{{"+n[1]+"}}")me(o,t).push(ge(ae,n[1])),n=null;else{var r=le(t,n.index);ce&&Pe(t),t=le(r,n[0].length);var i=r.parentNode.insertBefore(Ot(wt),r);r.parentNode.removeChild(r),me(o,i).push(ge(ae,n[1])),pe.lastIndex=0,!(n=pe.exec(ye(t)))&&ce&&Pe(t)}}}(t))}),n=null,o.forEach(function(e,n){if(t!==n){for(var o=[],i=n,u=i.parentNode;i!==t;)o.unshift(o.indexOf.call(u.childNodes,i)),u=(i=i.parentNode).parentNode;r.set(o,e)}else r.set([],e)}),o.clear(),i.clear(),r}function _e(t,e,n){var r=[];return e.forEach(function(e,o){var i=function(t,e){if(!e.length)return t;return E(e,function(e){return t=t.childNodes[e]}),t}(t,o);if(i)for(var u=0,a=e.length;u<a;u++)r.push(e[u].getNodeHandler(i,n));else xt(new v("dom-data-bind#render(): Unable to find node!"))}),r}function me(t,e){return t.has(e)||t.set(e,[]),t.get(e)}function ge(t,e){e=e.trim();var n=gt.get(t);return n||(n={},gt.set(t,n)),n[e]||(n[e]=new t(e)),n[e]}function we(t,e,n){n=n.trim();var r="".concat(e,"-").concat(wt,"-").concat(n),o=gt.get(t);return o||(o={},gt.set(t,o)),o[r]||(o[r]=new t(e,n)),o[r]}function Se(t){return 1!==t.nodeType||1===t.nodeType&&t.attributes.length>0}function ke(t,e){if(t.push(e),e.hasChildNodes())for(e=e.firstChild;e;){var n=e.nextSibling;3===e.nodeType&&e.nodeValue&&se.test(ye(e))&&t.push(e),ce&&Pe(e),e=n}return t}function Pe(t){3===t.nodeType&&ce&&!t.nodeValue&&(t.parentNode.insertBefore(Ot(""),t),t.parentNode.removeChild(t))}var Oe=new Map;function Ee(t){var e=arguments.length>1&&arguments[1]!==P?arguments[1]:Ee.directives||[],n=_(t)?t:t.innerHTML;return xe(n)||Oe.set(n,new ve(t,e)),Oe.get(n)}function xe(t){return Oe.has(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}Ee.directives=null,Ee.has=xe;var Ce=function(){function t(e,n){var r=arguments.length>2&&arguments[2]!==P?arguments[2]:"";!function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,t),this._frag=e,this._bindings=n,this._childNodes=C(e.childNodes,0),this.fromTemplateId=r}return function(t,e,n){e&&De(t.prototype,e),n&&De(t,n)}(t,[{key:"recover",value:function(){var t=this;this._childNodes.forEach(function(e){return t._frag.appendChild(e)})}},{key:"destroy",value:function(){if(this._bindings){for(var t=0,e=this._bindings.length;t<e;t++)this._bindings[t].destroy();this._bindings.length=0}}},{key:"setData",value:function(t){for(var e=0,n=this._bindings.length;e<n;e++)this._bindings[e].render(t)}}]),t}();function Ne(t,n,r){var o=t instanceof de?t:Ee(t,r),i=e.importNode(o.ele.content,!0);return i[mt]=new Ce(i,_e(i,o._bindings,o._directives),o.id),i[mt].setData(n),i}var Re=Ne,Te=st.extend({$ele:null,init:function(t,e){var n=this.getFactory(),r={html:t,data:e,directives:n.directives.slice(0)};gt.set(this,r),_(t)?(this.$ele=Ne(t,e,r.directives),r.bindings=this.$ele._bindings):(this.$ele=t,r.bindings=_e(t,be(t,r.directives),r.directives),e&&this.setData(e)),this.onDestroy(function(){E(r.bindings,function(t){return t.destroy()}),delete r.data,delete r.directives,delete r.bindings,n.getDestroyCallback(r,gt)()})},setData:function(t){var e=gt.get(this).bindings;E(e,function(e){return e.render(t)})}}),Ae=Te;Te.directives=[];var $e=function(t,e){return!(!t||!e)&&t.classList.contains(e)};var je=function(t,e){var n=u(e).trim().split(/\s+/).map(function(t){return t.trim()});t&&n.length&&n.forEach(function(e){return t.classList.add(e)})};var He=function(t,e){return t.classList.remove(e)};function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Ke(t,e,n){return e&&Ie(t.prototype,e),n&&Ie(t,n),t}function Ve(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function We(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ge(t,e)}function Ge(t,e){return(Ge=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fe=function(t){function e(){return Be(this,e),Ve(this,Le(e).apply(this,arguments))}return We(e,Jt),Ke(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","class")}}],[{key:"has",value:function(t){return M(t,"_class")?"_class":""}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Fe,"NodeHandlerConstructor",function(t){function e(){return Be(this,e),Ve(this,Le(e).apply(this,arguments))}return We(e,Lt),Ke(e,[{key:"update",value:function(t){var e=this._node,n=gt.get(this).value||{};f.keys(t).concat(f.keys(n)).forEach(function(n){t[n]&&!$e(e,n)?je(e,n):!t[n]&&$e(e,n)&&He(e,n)})}}]),e}());var ze=Fe;function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){t&&"object"===Ue(e)&&f.keys(e).forEach(function(n){t.style[n]=e[n]})}function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Ye(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),t}function Ze(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tn(t){return(tn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function en(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}function nn(t,e){return(nn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rn=function(t){function e(){return Qe(this,e),Ze(this,tn(e).apply(this,arguments))}return en(e,Jt),Ye(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","style")}}],[{key:"has",value:function(t){return M(t,"_style")?"_style":""}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(rn,"NodeHandlerConstructor",function(t){function e(){return Qe(this,e),Ze(this,tn(e).apply(this,arguments))}return en(e,Lt),Ye(e,[{key:"update",value:function(t){qe(this._node,t)}}]),e}());var on=rn;function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e,n){return(an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=yn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function cn(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function ln(t,e,n){return e&&fn(t.prototype,e),n&&fn(t,n),t}function sn(t,e){return!e||"object"!==un(e)&&"function"!=typeof e?pn(t):e}function pn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yn(t){return(yn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function hn(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dn(t,e)}function dn(t,e){return(dn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vn(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bn=function(t){function e(){return cn(this,e),sn(this,yn(e).apply(this,arguments))}return hn(e,Jt),ln(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","if")}}],[{key:"has",value:function(t){return M(t,"_if")?"_if":""}},{key:"manages",value:function(){return!0}}]),e}();vn(bn,"NodeHandlerConstructor",function(t){function e(){var t,n;cn(this,e);for(var r=arguments.length,o=new c(r),i=0;i<r;i++)o[i]=arguments[i];return vn(pn(pn(n=sn(this,(t=yn(e)).call.apply(t,[this].concat(o))))),"_renderedEle",null),vn(pn(pn(n)),"_renderTemplate",n._node.data),n}return hn(e,Lt),ln(e,[{key:"init",value:function(){for(var t,n=arguments.length,r=new c(n),o=0;o<n;o++)r[o]=arguments[o];(t=an(yn(e.prototype),"init",this)).call.apply(t,[this].concat(r)),this._placeholderEle=Ot("directive.if"),Qt(this._placeholderEle,this._node),Pt(this._node.parentNode,this._node)}},{key:"update",value:function(t){var e=gt.get(this);e.value!==t?t&&!this._renderedEle?(this._renderedEle=Ne(this._renderTemplate,e.data,this._directives),Qt(this._renderedEle,this._placeholderEle)):t||this.destroy_renderedEle():this._renderedEle&&this._renderedEle[mt].setData(e.data)}},{key:"destroy_renderedEle",value:function(){this._renderedEle&&(this._renderedEle[mt].recover(),this._renderedEle[mt].destroy(),this._renderedEle=null)}}]),e}());var _n=bn;function mn(t){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e,n){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=On(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wn(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function kn(t,e,n){return e&&Sn(t.prototype,e),n&&Sn(t,n),t}function Pn(t,e){return!e||"object"!==mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function On(t){return(On=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function En(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}function xn(t,e){return(xn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dn=function(t){function e(){return wn(this,e),Pn(this,On(e).apply(this,arguments))}return En(e,Jt),kn(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","show")}}],[{key:"has",value:function(t){return M(t,"_show")?"_show":""}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Dn,"NodeHandlerConstructor",function(t){function e(){return wn(this,e),Pn(this,On(e).apply(this,arguments))}return En(e,Lt),kn(e,[{key:"init",value:function(){for(var t,n=arguments.length,r=new c(n),o=0;o<n;o++)r[o]=arguments[o];(t=gn(On(e.prototype),"init",this)).call.apply(t,[this].concat(r)),this._origDisplayStyle=this._node.style.display||""}},{key:"update",value:function(t){var e=this._node.style;t?e.display=this._origDisplayStyle:"none"!==e.display&&(e.display="none")}}]),e}());var Cn=Dn;function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function An(t,e,n){return e&&Tn(t.prototype,e),n&&Tn(t,n),t}function $n(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jn(t){return(jn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Hn(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}function Mn(t,e){return(Mn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bn(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var In=function(t){function e(){return Rn(this,e),$n(this,jn(e).apply(this,arguments))}return Hn(e,Jt),An(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","attr"),this._htmlAttr=new RegExp(this.constructor._matches).exec(t)[1]}}],[{key:"has",value:function(t){var e=this,n="";return Ct(t).some(function(t){return e._matches.test(t)&&(n=t)}),n}}]),e}();Bn(In,"NodeHandlerConstructor",function(t){function e(){return Rn(this,e),$n(this,jn(e).apply(this,arguments))}return Hn(e,Lt),An(e,[{key:"update",value:function(t){var e=gt.get(this),n=this._directive._htmlAttr;this._directive.constructor._isProp?t!==e.value&&(this._node[n]=t):t&&e.value!==t?I(this._node,n,t):e.value&&!t&&K(this._node,n)}}]),e}()),Bn(In,"_matches",/^_attr\.(.*)/),Bn(In,"_isProp",!1);var Kn=In;function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Wn(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Fn(t,e){return(Fn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zn=/^_prop\.(.*)/,Un=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,e),Wn(this,Gn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fn(t,e)}(e,Kn),function(t,e,n){e&&Ln(t.prototype,e),n&&Ln(t,n)}(e,null,[{key:"_isProp",value:function(){return!0}},{key:"_matches",get:function(){return zn}}]),e}();var qn=function(t,e,n,r){var o=e.split(/\s+/),i={};return o.forEach(function(e){t.addEventListener(e,n,r),i[e]={remove:function(){return t.removeEventListener(e,n,r)}}}),f.create({listeners:i,remove:function(){o.forEach(function(t){return i[t].remove()})}})};function Jn(t){return(Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Xn(t,e){return!e||"object"!==Jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yn(t,e,n){return(Yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Zn(t){return(Zn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function tr(t,e){return(tr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var er=new RegExp("^".concat(function(t){return u(t).replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}("_on."),"(.*)")),nr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}(this,e),Xn(this,Zn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(e,Jt),function(t,e,n){e&&Qn(t.prototype,e),n&&Qn(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._eventName=new RegExp(er).exec(t)[1],this._tokenValueGetter=Dt(e||"","on")}},{key:"handleEvent",value:function(t,e){var n,r=gt.get(t);r.data.$ev=e;try{n=this._tokenValueGetter(r.data)}catch(t){return void xt(t)}if(delete r.data.$ev,"function"==typeof n)return n.call(t._n,e);n&&"function"===n.handleEvent&&n.handleEvent.call(n,e)}},{key:"render",value:function(t,e,n){var r=this,o=gt.get(t);o||(o={data:{$data:{}},tracker:function(){return r.render(t,e,o.data)}},gt.set(t,o)),n&&(n.$data?o.data=n:o.data.$data=n)}},{key:"getNodeHandler",value:function(t){var n=Yn(Zn(e.prototype),"getNodeHandler",this).call(this,t),r=qn(t,this._eventName,this.handleEvent.bind(this,n));return n.onDestroy(function(){return r.remove()}),n}}],[{key:"has",value:function(t){var e="";return Ct(t).some(function(t){return er.test(t)&&(e=t)}),e}}]),e}();function rr(t,e){return function(t){if(c.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=P;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new d("Invalid attempt to destructure non-iterable instance")}()}function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function ar(t,e,n){return e&&ur(t.prototype,e),n&&ur(t,n),t}function cr(t,e){return!e||"object"!==or(e)&&"function"!=typeof e?yr(t):e}function fr(t,e,n){return(fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=lr(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function lr(t){return(lr=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function sr(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pr(t,e)}function pr(t,e){return(pr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dr=Symbol("directive.each.setup"),vr="_key",br=function(t){return t._destroy()},_r=function(t){return t},mr=function(t){function e(){var t,n;ir(this,e);for(var r=arguments.length,o=new c(r),i=0;i<r;i++)o[i]=arguments[i];return hr(yr(yr(n=cr(this,(t=lr(e)).call.apply(t,[this].concat(o))))),"binders",[]),hr(yr(yr(n)),"bindersByKey",new pt),hr(yr(yr(n)),"listIterator",function(){return n._directive.iterateOverList(yr(yr(n)),gt.get(yr(yr(n))).value)}),n}return sr(e,Lt),ar(e,[{key:"init",value:function(t,n,r){fr(lr(e.prototype),"init",this).call(this,t,n,r),this._placeholderEle=Ot("directive.each"),this._isSoleChild=function(t){return c.prototype.every.call(t.parentNode.childNodes,function(e){return e===t||3===e.nodeType&&!e.textContent.trim()})}(this._node),this._viewTemplate=Ee(n.data,r),this._viewTemplate[dr]||function(t){if(!t[dr]){t[dr]={usesKey:!1,getKey:_r};var e=t.ele.content.firstChild;e&&e.hasAttribute&&M(e,vr)&&(t[dr].usesKey=!0,t[dr].getKey=Dt(B(e,vr),"each.key"),K(e,vr))}}(this._viewTemplate),Qt(this._placeholderEle,n),Pt(n.parentNode,n)}},{key:"update",value:function(t){var e=gt.get(this);t!==e.value&&(e.value=null,this.listIterator.stopWatchingAll&&this.listIterator.stopWatchingAll()),t?(e.value=t,function(t){return O(t)&&!t.length||kt(t)&&!w(t).length}(t)&&this.binders?this._directive.destroyChildBinders(this.binders,this):this.listIterator()):this._directive.destroyChildBinders(this.binders,this)}},{key:"destroy",value:function(){this.listIterator.stopWatchingAll&&this.listIterator.stopWatchingAll(),this.bindersByKey.clear(),this._directive.destroyChildBinders(this.binders,this),fr(lr(e.prototype),"destroy",this).call(this)}}]),e}(),gr=function(t){function e(){return ir(this,e),cr(this,lr(e).apply(this,arguments))}return sr(e,Jt),ar(e,[{key:"init",value:function(t,e){var n=rr(function(t){var e=/\(?(.+?)\)?\W?(?:of|in)\W(.*)/.exec(t);if(e)return(e=e.slice(1))[0]=e[0].split(/,/).map(function(t){return u(t).trim()}),e;return[]}((e||"").trim()),2),r=n[0],o=n[1];this._attr=t,this._iteratorArgs=r,this._tokenValueGetter=Dt(o||"","each")}},{key:"destroyChildBinders",value:function(t,e){if(t&&t.length)if(t=t.splice(0),e._isSoleChild){var n=e._placeholderEle.parentNode;n.textContent="",n.appendChild(e._placeholderEle),r(function(){E(t,function(t){return t._destroy()})})}else E(t,function(t){return t._destroy()})}},{key:"getDataForIteration",value:function(t,e){return this._iteratorArgs.reduce(function(e,n){return e[n]=t.shift(),e},e||{})}},{key:"iterateOverList",value:function(t,e){var n,r=gt.get(t),o=O(e);if(o)o=!0,n=e;else{if(!kt(e))return;n=w(e)}for(var i=t.binders,u=new pt,a=n.length,c=t._viewTemplate[dr],f=c.usesKey,l=c.getKey,s=0;s<a;s++){var p={$root:r.data.$root||r.data,$parent:r.data,$data:r.data.$data||r.data};o?this.getDataForIteration([n[s],s],p):this.getDataForIteration([e[n[s]],n[s],s],p);var y=l(f?p:o?n[s]:e[n[s]]);if(i[s]&&i[s]._loop.rowKey===y)i[s][mt].setData(p);else{i[s]&&(i[s][mt].recover(),u.set(i[s]._loop.rowKey,i[s]),i[s]=null);var h=t.bindersByKey.get(y);if(h?null!==h._loop.pos&&i[h._loop.pos]===h&&(i[h._loop.pos]=null):(h=u.get(y))&&u.delete(y),h)i[s]=h,h._loop.pos=s,i[s][mt].recover(),wr(i,s,t._placeholderEle),i[s][mt].setData(p);else{if(u.size){var d=rr(u.entries().next().value,2),v=d[0];(h=d[1])[mt].setData(p),u.delete(v),h._loop.rowKey=y,h._loop.pos=s}else(h=Ne(t._viewTemplate,p,t._directives))._destroy=Sr,h._handler=t,h._loop={rowKey:y,pos:s};i[s]=h,t.bindersByKey.set(y,h),wr(i,s,t._placeholderEle)}}}u.size&&(E(u.values(),br),u.clear()),a<i.length&&E(D(i,a),br)}}],[{key:"has",value:function(t){return M(t,"_each")?"_each":""}},{key:"manages",value:function(){return!0}}]),e}();function wr(t,e,n){var r=t[e];r[mt].recover(),t[e+1]?Qt(r,t[e+1][mt]._childNodes[0]):Qt(r,n)}function Sr(){this[mt].recover(),this._loop.rowKey&&this._handler.bindersByKey.delete(this._loop.rowKey),this[mt].destroy()}hr(gr,"NodeHandlerConstructor",mr);var kr=gr;function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t,e){if(!(t instanceof e))throw new d("Cannot call a class as a function")}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function xr(t,e,n){return e&&Er(t.prototype,e),n&&Er(t,n),t}function Dr(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cr(t){return(Cr=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Nr(t,e){if("function"!=typeof e&&null!==e)throw new d("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}function Rr(t,e){return(Rr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tr=function(t){function e(){return Or(this,e),Dr(this,Cr(e).apply(this,arguments))}return Nr(e,Jt),xr(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=Dt(e||"","html")}}],[{key:"has",value:function(t){return M(t,"_html")?"_html":""}}]),e}();!function(t,e,n){e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Tr,"NodeHandlerConstructor",function(t){function e(){return Or(this,e),Dr(this,Cr(e).apply(this,arguments))}return Nr(e,Lt),xr(e,[{key:"update",value:function(t){t!==gt.get(this).value&&(this._node.innerHTML=t)}}]),e}());var Ar=Tr;a.d(o,"DomDataBindAll",function(){return jr}),a.d(o,"allDirectives",function(){return $r}),a.d(o,"DomDataBind",function(){return Ae}),a.d(o,"render",function(){return Re}),a.d(o,"Directive",function(){return Jt}),a.d(o,"EachDirective",function(){return kr}),a.d(o,"IfDirective",function(){return _n}),a.d(o,"ClassDirective",function(){return ze}),a.d(o,"StyleDirective",function(){return on}),a.d(o,"ShowDirective",function(){return Cn}),a.d(o,"AttrDirective",function(){return Kn}),a.d(o,"PropDirective",function(){return Un}),a.d(o,"OnDirective",function(){return nr}),a.d(o,"HtmlDirective",function(){return Ar});var $r=[kr,_n,ze,on,Cn,Kn,Un,nr,Ar],jr=Ae.extend();jr.directives=$r;o.default=jr}])})}(window,document,location,setTimeout,setInterval,Date,String,Number,Array,Object,Function,atob,btoa,Math,JSON,TypeError,Error,encodeURIComponent,decodeURIComponent,requestAnimationFrame,CustomEvent,clearInterval,clearTimeout,console);
//# sourceMappingURL=dom-data-bind.legacy.umd.min.js.map
!function(t,e,n,r,o,i,u,a,c,f,l,s,p,y,d,h,v,b,g,_,m,w,k,S,P){!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DomDataBind=e():t.DomDataBind=e()}(t,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||f.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(t,Symbol.toStringTag,{value:"Module"}),f.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=f.create(null);if(n.r(r),f.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return f.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n,r){"use strict";(function(e){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(n,"a",function(){return i});var i="undefined"!==(void 0===t?"undefined":o(t))?t:"undefined"!==(void 0===e?"undefined":o(e))?e:"undefined"!==("undefined"==typeof self?"undefined":o(self))?self:l("return this;")()}).call(this,r(1))},function(e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o=function(){return this}();try{o=o||l("return this")()||(0,eval)("this")}catch(e){"object"===(void 0===t?"undefined":r(t))&&(o=t)}e.exports=o},function(n,o,a){"use strict";a.r(o);var s="[object Object]",p=l.call.bind(f.prototype.toString),d=l.call.bind(f.prototype.hasOwnProperty);var b,g=function t(e){for(var n=e||{},r=arguments.length,o=new c(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var u,a,f=o.length,l=!1;for("boolean"==typeof e&&(l=e,n=o.shift()||{},f=o.length),u=0;u<f;u++)if(o[u])for(a in o[u])d(o[u],a)&&(l&&p(n[a])===s&&p(o[u][a])===s?n[a]=t(!0,n[a],o[u][a]):n[a]=o[u][a]);return n};"undefined"==typeof WeakMap?function(){var e=f.defineProperty,n=i.now()%1e9,r=b=function(){this.name="__st"+(1e9*y.random()>>>0)+n+++"__"};r.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(t){var e;return(e=t[this.name])&&e[0]===t?e[1]:P},delete:function(t){var e=t[this.name];return!(!e||e[0]!==t)&&(e[0]=e[1]=P,!0)},has:function(t){var e=t[this.name];return!!e&&e[0]===t}},t.WeakMap=r}():b=WeakMap;var _={stash:new b,create:function(){return new b}},m=a(0),w=l.bind.call.bind(l.bind)(l.call.bind,l.call),k=f.defineProperty,E=f.defineProperties,O=f.keys,R=[],C=c.isArray,D=(w(R.forEach),w(R.indexOf)),x=w(R.splice),N=S.log,A=(S.error,S.warn,"undefined"!=typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"),I=HTMLElement.prototype,j=e;j.head,w(I.appendChild),w(I.insertBefore),w(I.hasAttribute),w(I.setAttribute),w(I.removeAttribute);function T(t,e){k(this,"_",{value:{keys:t.slice(0),values:e?e.slice(0):null,idx:0,total:t.length}})}E(T.prototype,{constructor:{value:T},next:{enumerable:!0,configurable:!0,value:function(){var t={done:this._.idx===this._.total};if(t.done)return t.value=P,t;var e=this._.idx++;return t.value=this._.keys[e],this._.values&&(t.value=[t.value,this._.values[e]]),t}}}),k(T.prototype,A,{value:function(){return this}});var $=m.a.Set&&m.a.Set.prototype[A]?m.a.Set:M,B=$;function M(){}function V(t){return function(t){if(c.isArray(t)){for(var e=0,n=new c(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in f(t)||"[object Arguments]"===f.prototype.toString.call(t))return c.from(t)}(t)||function(){throw new h("Invalid attempt to spread non-iterable instance")}()}E(M.prototype,function(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({constructor:{value:M,configurable:!0},_:{get:function(){var t=[];return k(this,"_",{value:t}),t}},add:{value:function(t){return-1===D(this._,t)&&this._.push(t),this}},has:{value:function(t){return-1!==D(this._,t)}},size:{get:function(){return this._.length}},clear:{value:function(){this._.splice(0)}},delete:{value:function(t){var e=D(this._,t);return-1!==e&&(this._.splice(e,1),!0)}},values:{value:function(){return new T(this._)}},entries:{value:function(){return new T(this._,this._)}},forEach:{value:function(t,e){var n=this;this._.forEach(function(e){return t(e,e,n)},e)}}},A,{value:function(){return this.values()}}));var H,W=new $;var K=function(t){"function"==typeof t&&(W.add(t),H||(H=r(L,0)))};function L(){var t,e=V(W);for(W.clear(),H=null;t=e.shift();)t(),t=null}function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e,n){return(G=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return i.prototype.toString.call(Reflect.construct(i,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(l.bind.apply(t,r));return n&&U(o,n.prototype),o}).apply(null,arguments)}function z(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function U(t,e){return(U=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=_.create(),J=["destroy","remove","off"];function X(t){var e,n=[];for(e in t)n.push(e);return n}var Y={isDestroyed:!1,init:function(){},destroy:function(t){if(q.has(this)){var e=q.get(this);q.delete(this),t?e.forEach(tt):K(function(){return e.forEach(tt)})}"boolean"==typeof this.isDestroyed&&(this.isDestroyed=!0)},onDestroy:function(t){(function(t){q.has(t)||q.set(t,[]);return q.get(t)})(this).push(t)},getFactory:function(){if(this.constructor)return this.constructor}},Z={extend:function(){for(var t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),z(this,Q(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,t),e}(this),e=arguments.length,n=new c(e),r=0;r<e;r++)n[r]=arguments[r];return g(t.prototype,n.reduce(function(t,e){if(e){var n=e.prototype||e;X(n).forEach(function(e){t[e]=n[e]})}return t},{})),t},isInstanceOf:function(t){return!!t&&!X(this.prototype).some(function(e){return void 0===t[e]})},create:function(){return G(this,c.prototype.slice.call(arguments))},getDestroyCallback:function(t,e){return function(){t&&f.keys(t).forEach(function(e){t[e]&&(J.some(function(n){if(t[e][n]&&("remove"!==n||!(t[e]instanceof Node)))return t[e][n](),!0}),t[e]=P)}),e&&e.has&&e.has(t)&&e.delete(t)}}};function tt(t){"function"==typeof t&&t()}var et=function(){function t(){for(var e=arguments.length,n=new c(e),r=0;r<e;r++)n[r]=arguments[r];return this&&this.constructor&&this instanceof this.constructor?this.init.apply(this,n):G(t,n)}return t.prototype.constructor=t,t}();g(et.prototype,Y),g(et,Z);var nt=et;function rt(t){return function(t){if(c.isArray(t)){for(var e=0,n=new c(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in f(t)||"[object Arguments]"===f.prototype.toString.call(t))return c.from(t)}(t)||function(){throw new h("Invalid attempt to spread non-iterable instance")}()}var ot,it,ut=/native code/i,at=function(){if("undefined"!=typeof setImediate&&ut.test(setImediate.toString()))return setImediate;if("function"==typeof Promise&&ut.test(Promise.toString())){var t=Promise.resolve();return function(e){t.then(e).catch(function(t){return S.error(t)})}}var e=[],n=!1;return function(t){e.push(t),n||(n=!0,function t(){r(function(){e.shift()(),e.length?t():n=!1},0)}())}}(),ct=!1,ft=new Set,lt=function(){var t=rt(ft);for(ft.clear(),ct=!1,ot=0,it=t.length;ot<it;ot++)t[ot]()};at.queue=function(t){ft.add(t),ct||(ct=!0,at(lt))};var st=at;function pt(t){return function(t){if(c.isArray(t)){for(var e=0,n=new c(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in f(t)||"[object Arguments]"===f.prototype.toString.call(t))return c.from(t)}(t)||function(){throw new h("Invalid attempt to spread non-iterable instance")}()}var yt="___$observable$___",dt={configurable:!0,enumerable:!0},ht=new B,vt="___$watching$___",bt="__$watchable$__",gt="__$is".concat(bt),_t=["pop","push","shift","splice","unshift","sort","reverse"],mt=function(t){return t&&"[object Object]"===f.prototype.toString.call(t)},wt=new B,kt=!1;function St(t,e,n){t[yt]||Pt(t),e&&!t[yt].props[e]?(Ot(t,e),Rt(t,e)):e&&t[yt].props[e].setupInterceptors&&Rt(t,e),e&&n?t[yt].props[e].storeCallback(n):e||(Ct(t,!1),n&&t[yt].storeCallback(n));var r=function(t,e){t&&(e.dependents&&(e.dependents.delete(t),$t(t,e.dependents)),e.watchers.delete(t),$t(t,e.watchers))}.bind(t,n,e?t[yt].props[e]:t[yt]);return r.destroy=r,r}function Pt(t){t[yt]||(k(t,yt,{configurable:!0,writable:!0,deep:!1,value:{props:{},dependents:new B,watchers:new B,storeCallback:It}}),Et(t[yt].dependents,!1),Et(t[yt].watchers,!0))}function Et(t){var e=arguments.length>1&&arguments[1]!==P&&arguments[1];t.async=e,t.isQueued=!1,t.notify=Dt}function Ot(t,e){return t[yt].props[e]||(t[yt].props[e]={val:P,dependents:new B,watchers:new B,parent:t[yt],storeCallback:It,setupInterceptors:!0,deep:t[yt].deep},Et(t[yt].props[e].dependents,!1),Et(t[yt].props[e].watchers,!0)),t[yt].props[e]}function Rt(t,e){var n=f.getOwnPropertyDescriptor(t,e)||dt;n.get||(t[yt].props[e].val=t[e],t[yt].props[e].deep&&Ct(t[yt].props[e].val)),k(t,e,{configurable:n.configurable||!1,enumerable:n.enumerable||!1,get:function(){return ht.size&&ht.forEach(t[yt].props[e].storeCallback,t[yt].props[e]),n.get?n.get.call(t):t[yt].props[e].val},set:function(r){var o=t[e];return n.set?r=n.set.call(t,r):t[yt].props[e].val=r,t[yt].props[e].deep&&Ct(r),r!==o&&(t[yt].props[e].watchers.notify(),t[yt].props[e].dependents.notify(),t[yt].watchers.notify()),r}}),t[yt].props[e].setupInterceptors=!1,n===dt&&t[yt].watchers.notify()}function Ct(t){var e=!(arguments.length>1&&arguments[1]!==P)||arguments[1],n=arguments.length>2&&arguments[2]!==P&&arguments[2];return mt(t)||C(t)?(t[yt]||(mt(t)?Pt(t):C(t)&&Bt(t)),n||!t[yt].deep?(e&&(t[yt].deep=!0),C(t)?function(t,e){for(var n=0,r=t.length;n<r;n++)Ct(t[n],!0,e)}(t):function(t,e){for(var n=O(t),r=0,o=n.length;r<o;r++)t[yt].props[n[r]]||(Ot(t,n[r]),Rt(t,n[r])),t[yt].props[n[r]].deep&&!e||(t[yt].props[n[r]].deep=!0,mt(t[n[r]])&&Ct(t[n[r]],!0,e))}(t),t):void 0):t}function Dt(){this.size&&(this.async?this.forEach(xt):this.forEach(Nt),function(t){t&&xt(t);if(kt||!wt.size)return;kt=!0,st(At)}())}function xt(t){wt.add(t)}function Nt(t){t()}function At(){var t=pt(wt);wt.clear(),kt=!1;for(var e=0,n=t.length;e<n;e++)t[e]();t.length=0}function It(t){t.asDependent&&this.dependents?(Tt(t,this.dependents),this.dependents.add(t)):(Tt(t,this.watchers),this.watchers.add(t))}function jt(t){ht.delete(t)}function Tt(t,e){t[vt]||(k(t,vt,{configurable:!0,writable:!0,value:{watching:new B}}),k(t,"stopWatchingAll",{configurable:!0,writable:!0,value:function(){t[vt].watching.forEach(function(e){return e.delete(t)}),t[vt].watching.clear()}})),t[vt].watching.add(e)}function $t(t,e){t[vt]&&t[vt].watching.delete(e)}function Bt(t){if(t[yt]||Pt(t),!t[gt]){var e=t.__proto__;if(!e[bt]){var n=f.create(e);_t.forEach(function(t){k(n,t,{configurable:!0,writable:!0,value:function(){for(var n,r=arguments.length,o=new c(r),i=0;i<r;i++)o[i]=arguments[i];var u=(n=e[t]).call.apply(n,[this].concat(o));return this[yt].dependents.notify(),this[yt].watchers.notify(),u}})}),k(n,"size",{configurable:!0,get:function(){return ht.size&&ht.forEach(this[yt].storeCallback,this[yt]),this.length}}),k(n,gt,{value:!0}),k(e,bt,{configurable:!0,writable:!0,value:n})}t.__proto__=e[bt]}}var Mt=m.a.Map&&m.a.Map.prototype[A]?m.a.Map:Vt;function Vt(){}E(Vt.prototype,function(t,e,n){return e in t?f.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({constructor:{value:Vt,configurable:!0},_:{get:function(){return k(this,"_",{value:{keys:[],values:[]}}),this._}},get:{value:function(t){return this._.values[D(this._.keys,t)]}},set:{value:function(t,e){return-1===D(this._.keys,t)&&(this._.keys.push(t),this._.values.push(e)),this}},has:{value:function(t){return-1!==D(this._.keys,t)}},size:{get:function(){return this._.keys.length}},clear:{value:function(){x(this._.keys,0),x(this._.values,0)}},delete:{value:function(t){var e=D(this._.keys,t);return-1!==e&&(x(this._.keys,e,1),x(this._.values,e,1),!0)}},keys:{value:function(){return new T(this._.keys)}},values:{value:function(){return new T(this._.values)}},entries:{value:function(){return new T(this._.keys,this._.values)}},forEach:{value:function(t,e){var n=this;this._.keys.forEach(function(e,r){return t(n._.values[r],e,n)},e)}}},A,{value:function(){return this.entries()}}));var Ht=e,Wt=l,Kt=Element.prototype,Lt=c.prototype,Ft=new Mt,Gt=Wt.bind.call.bind(Wt.bind),zt="DomDataBind",Qt=_.create(),Ut="D-".concat(i.now(),"-").concat(y.random().toString(36).replace(/[^a-z0-9]+/g,"")),qt=Gt(Wt.call.bind,Wt.call),Jt=function(t){return"[object Object]"===f.prototype.toString.call(t)},Xt=qt(Lt.forEach),Yt=qt(Lt.slice),Zt=qt(Kt.hasAttribute),te=qt(Kt.getAttribute),ee=qt(Kt.setAttribute),ne=qt(Kt.removeAttribute),re=qt(Kt.insertBefore),oe=qt(Kt.removeChild),ie=Gt(Ht.createComment,Ht),ue=Gt(Ht.createTextNode,Ht),ae=Gt(Ht.createDocumentFragment,Ht),ce=Gt(S.error,S);function fe(t){if(t=t.trim(),Ft.has(t))return Ft.get(t);var e=new Wt("$data","\nwith ($data) {\n    if ($data) {\n        with ($data) {\n            return ".concat(t,";\n        }\n    } \n    else {\n        return ").concat(t,";\n    }\n}\n"));return Ft.set(t,e),e}function le(t){for(var e=[],n=t.attributes.length,r=0;r<n;r++)e.push(t.attributes.item(r).name);return e}var se=function(t,e){return c.prototype.slice.call(t.querySelectorAll(e))};function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e,n){return(ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function de(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function ve(t,e,n){return e&&he(t.prototype,e),n&&he(t,n),t}function be(t,e){return!e||"object"!==pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ge(t){return(ge=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function _e(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}function me(t,e){return(me=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var we=function(t){function e(){return de(this,e),be(this,ge(e).apply(this,arguments))}return _e(e,nt),ve(e,[{key:"render",value:function(t,e,n){var r=this,o=Qt.get(t);o||(o={data:null,value:"",isQueued:!1,deferUpd:this.update.bind(this,t),tracker:function(){return r.render(t,e,o.data)}},Qt.set(t,o)),o.data!==n&&(o.tracker.stopWatchingAll&&o.tracker.stopWatchingAll(),o.data=n),o.isQueued||(o.isQueued=!0,st(o.deferUpd))}},{key:"update",value:function(t){if(!t.isDestroyed){var e=Qt.get(t);if(e){var n="";!function(t){ht.add(t)}(e.tracker);try{n=this._tokenValueGetter(e.data||{}),t.update&&t.update(n)}catch(t){ce(t)}jt(e.tracker),e.isQueued=!1,e.value!==n&&(e.value=n)}}}},{key:"getNodeHandler",value:function(t){return this._attr&&8!==t.nodeType&&ne(t,this._attr),new ke(this,t)}}],[{key:"has",value:function(){return""}},{key:"manages",value:function(){return!1}}]),e}(),ke=function(t){function e(){return de(this,e),be(this,ge(e).apply(this,arguments))}return _e(e,nt),ve(e,[{key:"init",value:function(t,e){this._d=t,this._n=e}},{key:"destroy",value:function(){var t=Qt.get(this);t&&(t.tracker&&t.tracker.stopWatchingAll&&t.tracker.stopWatchingAll(),t.data&&(t.data=null)),ye(ge(e.prototype),"destroy",this).call(this),Qt.delete(this)}},{key:"render",value:function(t){this._d.render(this,this._n,t)}},{key:"update",value:function(t){var e=Qt.get(this);if(e&&e.update)return e.update(t)}}]),e}();function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Ee(t,e){return!e||"object"!==Se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t,e,n){return(Oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Re(t){return(Re=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function n(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,n),Ee(this,Re(n).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ce(t,e)}(n,we),function(t,e,n){e&&Pe(t.prototype,e),n&&Pe(t,n)}(n,[{key:"init",value:function(t){this._tokenText=t,this._tokenValueGetter=fe(t)}},{key:"render",value:function(t,e,r){Oe(Re(n.prototype),"render",this).call(this,t,e,r);var o=Qt.get(t);o.update||(o.update=function(t){t!==e.nodeValue&&(e.nodeValue=t)})}},{key:"getNodeHandler",value:function(t){if(8===t.nodeType&&t.nodeValue===Ut){var r=t;t=t.parentNode.insertBefore(e.createTextNode(""),r),r.parentNode.removeChild(r)}return Oe(Re(n.prototype),"getNodeHandler",this).call(this,t)}}]),n}();function xe(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Ae(t,e,n){return e&&Ne(t.prototype,e),n&&Ne(t,n),t}var Ie=function(){var t=ae();return t.appendChild(ue("test")),t.appendChild(ue("")),1===t.cloneNode(!0).childNodes.length}(),je=function(){var t=e.createElement("div"),n=ue("test");return t.appendChild(n),!t.contains(n)}(),Te=qt(Text.prototype.splitText),$e=new RegExp("{{(.*?)}}"),Be=new RegExp("{{(.*?)}}","g"),Me=function(t){return t?t.nodeValue:""},Ve=function(t){return $e.test(Me(t))},He=function(){function t(n){var r=arguments.length>1&&arguments[1]!==P?arguments[1]:[];xe(this,t),this._template=e.createElement("template"),this._template.innerHTML=n,this._directives=r,this._bindings=We(this._template.content,r)}return Ae(t,[{key:"cloneWith",value:function(){var t=arguments.length>0&&arguments[0]!==P?arguments[0]:{};Ct(t);var n=e.importNode(this._template.content,!0);return n[zt]=new qe(n,Ke(n,this._bindings,this._directives)),n[zt].setData(t),n}}]),t}();function We(t,n){var r,o=new Map,i=new Map,u=new Set,a=function(t){for(var n,o,a,c=r;n=t.has(r);)if(o=te(r,n),(a=t.manages())&&(c=ie("")),Le(i,c).push(Ge(t,n,o)),ne(r,n),a){u.add(r),r.parentNode.insertBefore(c,r);var f=e.createElement("div");f.appendChild(r),c.data=f.innerHTML}return a};return function(t){return[t].concat(se(t,"*")).reduce(Qe,[]).filter(ze)}(t).forEach(function(t){var e=!1;if(u.size){var o=!0,c=!1,f=P;try{for(var l,s=u.values()[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var p=l.value;if(je&&3===t.nodeType?16&p.compareDocumentPosition(t)&&(e=!0):p.contains(t)&&(e=!0),e)break}}catch(t){c=!0,f=t}finally{try{o||null==s.return||s.return()}finally{if(c)throw f}}}r=t,e||(1===t.nodeType?n.some(a):3===t.nodeType&&function(t){if(Ve(t)){Be.lastIndex=0;for(var e=Me(t),n=Be.exec(e);n;)if(e==="{{"+n[1]+"}}")Le(i,t).push(Fe(De,n[1])),n=null;else{var r=Te(t,n.index);Ie&&Ue(t),t=Te(r,n[0].length);var o=r.parentNode.insertBefore(ie(Ut),r);r.parentNode.removeChild(r),Le(i,o).push(Fe(De,n[1])),Be.lastIndex=0,!(n=Be.exec(Me(t)))&&Ie&&Ue(t)}}}(t))}),r=null,i.forEach(function(e,n){if(t!==n){for(var r=[],i=n,u=i.parentNode;i!==t;)r.unshift(r.indexOf.call(u.childNodes,i)),u=(i=i.parentNode).parentNode;o.set(r,e)}else o.set([],e)}),i.clear(),u.clear(),o}function Ke(t,e,n){var r=[];return e.forEach(function(e,o){var i=function(t,e){if(!e.length)return t;return Xt(e,function(e){return t=t.childNodes[e]}),t}(t,o);if(i)for(var u=0,a=e.length;u<a;u++)r.push(e[u].getNodeHandler(i,n));else ce(new v("dom-data-bind#render(): Unable to find node!"))}),r}function Le(t,e){return t.has(e)||t.set(e,[]),t.get(e)}function Fe(t,e){e=e.trim();var n=Qt.get(t);return n||(n={},Qt.set(t,n)),n[e]||(n[e]=new t(e)),n[e]}function Ge(t,e,n){n=n.trim();var r="".concat(e,"-").concat(Ut,"-").concat(n),o=Qt.get(t);return o||(o={},Qt.set(t,o)),o[r]||(o[r]=new t(e,n)),o[r]}function ze(t){return 1!==t.nodeType||1===t.nodeType&&t.attributes.length>0}function Qe(t,e){if(t.push(e),e.hasChildNodes())for(e=e.firstChild;e;){var n=e.nextSibling;3===e.nodeType&&e.nodeValue&&$e.test(Me(e))&&t.push(e),Ie&&Ue(e),e=n}return t}function Ue(t){3===t.nodeType&&Ie&&!t.nodeValue&&(t.parentNode.insertBefore(ie(""),t),t.parentNode.removeChild(t))}var qe=function(){function t(e,n){xe(this,t),this._frag=e,this._bindings=n}return Ae(t,[{key:"destroy",value:function(){if(this._bindings){for(var t=0,e=this._bindings.length;t<e;t++)this._bindings[t].destroy();this._bindings.length=0}}},{key:"setData",value:function(t){for(var e=0,n=this._bindings.length;e<n;e++)this._bindings[e].render(t)}}]),t}(),Je=new Map;function Xe(t,e,n){return Je.has(t)||Je.set(t,new He(t,n)),Je.get(t).cloneWith(e)}var Ye=Xe,Ze=nt.extend({$ele:null,init:function(t,e){var n=this.getFactory(),r={html:t,data:e,directives:n.directives.slice(0)};Qt.set(this,r),!function(t){return"string"==typeof t}(t)?(this.$ele=t,r.bindings=Ke(t,We(t,r.directives),r.directives),e&&this.setData(e)):(this.$ele=Xe(t,e,r.directives),r.bindings=this.$ele._domDataBindNodeHandlers),this.onDestroy(function(){Xt(r.bindings,function(t){return t.destroy()}),delete r.data,delete r.directives,delete r.bindings,n.getDestroyCallback(r,Qt)()})},setData:function(t){Ct(t);var e=Qt.get(this).bindings;Xt(e,function(e){return e.render(t)})}}),tn=Ze;Ze.directives=[];var en=function(t,e){return!(!t||!e)&&t.classList.contains(e)};var nn=function(t,e){var n=u(e).trim().split(/\s+/).map(function(t){return t.trim()});t&&n.length&&n.forEach(function(e){return t.classList.add(e)})};var rn=function(t,e){return t.classList.remove(e)};function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function an(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t,e,n){return(cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=fn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function fn(t){return(fn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function ln(t,e){return(ln=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),an(this,fn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ln(t,e)}(e,we),function(t,e,n){e&&un(t.prototype,e),n&&un(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||"")}},{key:"render",value:function(t,n,r){cn(fn(e.prototype),"render",this).call(this,t,n,r);var o=Qt.get(t);o.update||(o.update=function(t){return function(t){var e=arguments.length>1&&arguments[1]!==P?arguments[1]:{},n=arguments.length>2&&arguments[2]!==P?arguments[2]:{};f.keys(e).concat(f.keys(n)).forEach(function(n){e[n]&&!en(t,n)?nn(t,n):!e[n]&&en(t,n)&&rn(t,n)})}(n,t,t!==o.value?o.value:{})})}}],[{key:"has",value:function(t){return Zt(t,"_class")?"_class":""}}]),e}();function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function dn(t,e){return!e||"object"!==pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hn(t,e,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=vn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function vn(t){return(vn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function bn(t,e){return(bn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),dn(this,vn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bn(t,e)}(e,we),function(t,e,n){e&&yn(t.prototype,e),n&&yn(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||"")}},{key:"render",value:function(t,n,r){hn(vn(e.prototype),"render",this).call(this,t,n,r);var o=Qt.get(t);if(!o.update){var i=n.style;o.update=function(t){f.keys(t).forEach(function(e){i[e]!==t[e]&&(i[e]=t[e])})}}}}],[{key:"has",value:function(t){return Zt(t,"_style")?"_style":""}}]),e}();function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function wn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kn(t,e,n){return(kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Sn(t){return(Sn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Pn(t,e){return(Pn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function En(t){this.value!==t&&(t&&!this.renderedEle?(this.renderedEle=Xe(this.renderTemplate,this.data,this.directives),this.renderedEle._children=Yt(this.renderedEle.childNodes,0),re(this.insertEle.parentNode,this.renderedEle,this.insertEle)):!t&&this.renderedEle&&this.destroyRenderedEle())}function On(){this.renderedEle&&(this.renderedEle._children.forEach(function(t){return t.parentNode&&t.parentNode.removeChild(t)}),this.renderedEle[zt].destroy(),this.renderedEle=null)}var Rn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),wn(this,Sn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pn(t,e)}(e,we),function(t,e,n){e&&mn(t.prototype,e),n&&mn(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||"")}},{key:"render",value:function(t,n,r){kn(Sn(e.prototype),"render",this).call(this,t,n,r);var o=Qt.get(t);o.update||(o.renderedEle=null,o.insertEle=t._placeholderEle,o.directives=t._directives,o.destroyRenderedEle=On,o.renderTemplate=t._n.data,o.update=En,t.onDestroy(function(){return o.destroyRenderedEle()}))}},{key:"getNodeHandler",value:function(t,n){var r=kn(Sn(e.prototype),"getNodeHandler",this).call(this,t);return r._placeholderEle=ie(""),r._directives=n,re(t.parentNode,r._placeholderEle,t),oe(t.parentNode,t),r}}],[{key:"has",value:function(t){return Zt(t,"_if")?"_if":""}},{key:"manages",value:function(){return!0}}]),e}();function Cn(t){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function xn(t,e){return!e||"object"!==Cn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nn(t,e,n){return(Nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function An(t){return(An=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function In(t,e){return(In=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),xn(this,An(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,we),function(t,e,n){e&&Dn(t.prototype,e),n&&Dn(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||"")}},{key:"render",value:function(t,n,r){Nn(An(e.prototype),"render",this).call(this,t,n,r);var o=Qt.get(t);if(!o.update){var i=n.style,u=n.display||"";o.update=function(t){t?i.display=u:"none"!==i.display&&(i.display="none")}}}}],[{key:"has",value:function(t){return Zt(t,"_show")?"_show":""}}]),e}();function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Bn(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mn(t,e,n){return(Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Vn(t){return(Vn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Hn(t,e){return(Hn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wn=/^_attr\.(.*)/,Kn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),Bn(this,Vn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(e,we),function(t,e,n){e&&$n(t.prototype,e),n&&$n(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||""),this._htmlAttr=new RegExp(this.constructor._matches).exec(t)[1]}},{key:"render",value:function(t,n,r){var o=this;Mn(Vn(e.prototype),"render",this).call(this,t,n,r);var i=Qt.get(t);i.update||(i.update=function(t){o.constructor._isProp?t!==i.value&&(n[o._htmlAttr]=t):t&&i.value!==t?ee(n,o._htmlAttr,t):i.value&&!t&&ne(n,o._htmlAttr)})}}],[{key:"has",value:function(t){var e=this,n="";return le(t).some(function(t){return e._matches.test(t)&&(n=t)}),n}},{key:"_matches",get:function(){return Wn}},{key:"_isProp",get:function(){return!1}}]),e}();function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Gn(t,e){return!e||"object"!==Ln(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function zn(t){return(zn=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Un=/^_prop\.(.*)/,qn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),Gn(this,zn(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,Kn),function(t,e,n){e&&Fn(t.prototype,e),n&&Fn(t,n)}(e,null,[{key:"_isProp",value:function(){return!0}},{key:"_matches",get:function(){return Un}}]),e}();var Jn=function(t,e,n,r){var o=e.split(/\s+/),i={};return o.forEach(function(e){t.addEventListener(e,n,r),i[e]={remove:function(){return t.removeEventListener(e,n,r)}}}),f.create({listeners:i,remove:function(){o.forEach(function(t){return i[t].remove()})}})};function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function Zn(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tr(t,e,n){return(tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=er(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function er(t){return(er=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function nr(t,e){return(nr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rr=new RegExp("^".concat(function(t){return u(t).replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}("_on."),"(.*)")),or=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),Zn(this,er(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nr(t,e)}(e,we),function(t,e,n){e&&Yn(t.prototype,e),n&&Yn(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._eventName=new RegExp(rr).exec(t)[1],this._tokenValueGetter=fe(e||"")}},{key:"handleEvent",value:function(t,e){var n,r=Qt.get(t);r.data.$ev=e;try{n=this._tokenValueGetter(r.data)}catch(t){return void ce(t)}if(delete r.data.$ev,"function"==typeof n)return n.call(t._n,e);n&&"function"===n.handleEvent&&n.handleEvent.call(n,e)}},{key:"render",value:function(t,e,n){var r=this,o=Qt.get(t);o||(o={data:{$data:{}},tracker:function(){return r.render(t,e,o.data)}},Qt.set(t,o)),n&&(n.$data?o.data=n:o.data.$data=n)}},{key:"getNodeHandler",value:function(t){var n=tr(er(e.prototype),"getNodeHandler",this).call(this,t),r=Jn(t,this._eventName,this.handleEvent.bind(this,n));return n.onDestroy(function(){return r.remove()}),n}}],[{key:"has",value:function(t){var e="";return le(t).some(function(t){return rr.test(t)&&(e=t)}),e}}]),e}();function ir(t,e){t[yt]||Bt(t),e&&t[yt].storeCallback(e);var n=function(){return t[yt].watchers.delete(e)};return n.destroy=n,n}function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){return function(t){if(c.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=P;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new h("Invalid attempt to destructure non-iterable instance")}()}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function fr(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t,e,n){return(lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=sr(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function sr(t){return(sr=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function pr(t,e){return(pr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yr=function(){};function dr(){for(var t=0,e=this._children.length;t<e;t++)this._children[t].parentNode&&this._children[t].parentNode.removeChild(this._children[t]);this._loop.rowKey&&this._state.bindersByKey.delete(this._loop.rowKey),this._state=null,this[zt].destroy()}var hr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),fr(this,sr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pr(t,e)}(e,we),function(t,e,n){e&&cr(t.prototype,e),n&&cr(t,n)}(e,[{key:"init",value:function(t,e){var n=ar(function(t){var e=/\(?(.+?)\)?\W?(?:of|in)\W(.*)/.exec(t);if(e)return(e=e.slice(1))[0]=e[0].split(/,/).map(function(t){return u(t).trim()}),e;return[]}((e||"").trim()),2),r=n[0],o=n[1];this._attr=t,this._iteratorArgs=r,this._tokenValueGetter=fe(o||"")}},{key:"render",value:function(t,n,r){var o=this;lr(sr(e.prototype),"render",this).call(this,t,n,r);var i=Qt.get(t);i.update||(i.binders=[],i.bindersByKey=new Mt,i.listIterator=function(){return o.iterateOverList(t,i.value)},i.isFirstRender=!0,i.usesKey=!1,i.getKey=yr,i.update=function(e){e!==i.value&&(i.value&&(i.value=null,i.listIterator.stopWatchingAll&&i.listIterator.stopWatchingAll()),e?(jt(i.tracker),i.value=e,Ct(e),c.isArray(e)?ir(e,i.listIterator):Jt(e)&&St(e,null,i.listIterator),function(t){return c.isArray(t)&&!t.length||Jt(t)&&!f.keys(t).length}(e)&&i.binders?o.destroyChildBinders(i.binders,t):o.iterateOverList(t,e)):o.destroyChildBinders(i.binders,t))},t.onDestroy(function(){i.listIterator.stopWatchingAll&&i.listIterator.stopWatchingAll(),i.bindersByKey.clear(),o.destroyChildBinders(i.binders,t)}))}},{key:"destroyChildBinders",value:function(t,e){if(t&&t.length)if(t=t.splice(0),e._isSoleChild){var n=e._placeholderEle.parentNode;n.textContent="",n.appendChild(e._placeholderEle),r(function(){Xt(t,function(t){return t._destroy()})})}else Xt(t,function(t){return t._destroy()})}},{key:"getDataForIteration",value:function(t,e){return this._iteratorArgs.reduce(function(e,n){return e[n]=t.shift(),e},e||{})}},{key:"iterateOverList",value:function(t,e){var n,r,o=Qt.get(t),i=[],u=ae(),a=c.isArray(e);if(a)a=!0,r=e;else{if(!Jt(e))return;r=f.keys(e)}for(var l=0,s=r.length;l<s;l++){var p={$data:o.data.$data||o.data};a?this.getDataForIteration([r[l],l],p):this.getDataForIteration([e[r[l]],r[l],l],p);var y=this.getRowBinder(t,p);y._loop.pos=l,i.push(y),u.appendChild(y)}u.hasChildNodes()&&re(t._placeholderEle.parentNode,u,t._placeholderEle),Xt((n=o.binders).splice.apply(n,[0,o.binders.length].concat(i)),function(t){-1===i.indexOf(t)&&t._destroy()}),o.binders.length&&this.positionChildren(t._placeholderEle.parentNode,t._placeholderEle,o.binders)}},{key:"getRowBinder",value:function(t,e){var n,r=Qt.get(t),o=r.getKey(e);return o&&(n=r.bindersByKey.get(o)),n?(delete e.$data,n[zt].setData(e),n):(n=Xe(t._n.data,e,t._directives),r.isFirstRender&&(r.isFirstRender=!1,1===n.childNodes.length&&1===n.firstChild.nodeType&&Zt(n.firstChild,"_key")&&(r.usesKey=!0,r.getKey=fe(te(n.firstChild,"_key")),o=r.getKey(e))),r.usesKey&&ne(n.firstChild,"_key"),n._children=Yt(n.childNodes,0),n._destroy=dr,n._state=r,n._loop={rowEle:n,rowKey:o,pos:-1},o&&r.bindersByKey.set(o,n),n)}},{key:"positionChildren",value:function(t,e,n){Xt(n,function(r,o){r._loop.pos!==o&&(re(t,r._loop.rowEle,n[o+1]?n[o+1]._loop.rowEle:e),r._loop.pos=o)})}},{key:"getNodeHandler",value:function(t,n){var r=lr(sr(e.prototype),"getNodeHandler",this).call(this,t);return r._directives=n,r._placeholderEle=ie(""),r._isSoleChild=function(t){return c.prototype.every.call(t.parentNode.childNodes,function(e){return e===t||3===e.nodeType&&!e.textContent.trim()})}(t),re(t.parentNode,r._placeholderEle,t),oe(t.parentNode,t),r}}],[{key:"has",value:function(t){return Zt(t,"_each")?"_each":""}},{key:"manages",value:function(){return!0}}]),e}();function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),f.defineProperty(t,r.key,r)}}function gr(t,e){return!e||"object"!==vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _r(t,e,n){return(_r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!f.prototype.hasOwnProperty.call(t,e)&&null!==(t=mr(t)););return t}(t,e);if(r){var o=f.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function mr(t){return(mr=f.setPrototypeOf?f.getPrototypeOf:function(t){return t.__proto__||f.getPrototypeOf(t)})(t)}function wr(t,e){return(wr=f.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new h("Cannot call a class as a function")}(this,e),gr(this,mr(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new h("Super expression must either be null or a function");t.prototype=f.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}(e,we),function(t,e,n){e&&br(t.prototype,e),n&&br(t,n)}(e,[{key:"init",value:function(t,e){this._attr=t,this._tokenValueGetter=fe(e||"")}},{key:"render",value:function(t,n,r){_r(mr(e.prototype),"render",this).call(this,t,n,r);var o=Qt.get(t);o.update||(o.update=function(t){t!==o.value&&(n.innerHTML=t)})}}],[{key:"has",value:function(t){return Zt(t,"_html")?"_html":""}}]),e}();a.d(o,"DomDataBindAll",function(){return Pr}),a.d(o,"allDirectives",function(){return Sr}),a.d(o,"DomDataBind",function(){return tn}),a.d(o,"render",function(){return Ye}),a.d(o,"Directive",function(){return we}),a.d(o,"EachDirective",function(){return hr}),a.d(o,"IfDirective",function(){return Rn}),a.d(o,"ClassDirective",function(){return sn}),a.d(o,"StyleDirective",function(){return gn}),a.d(o,"ShowDirective",function(){return jn}),a.d(o,"AttrDirective",function(){return Kn}),a.d(o,"PropDirective",function(){return qn}),a.d(o,"OnDirective",function(){return or}),a.d(o,"HtmlDirective",function(){return kr});var Sr=[hr,Rn,sn,gn,jn,Kn,qn,or,kr],Pr=tn.extend();Pr.directives=Sr;o.default=Pr}])})}(window,document,location,setTimeout,setInterval,Date,String,Number,Array,Object,Function,atob,btoa,Math,JSON,TypeError,Error,encodeURIComponent,decodeURIComponent,requestAnimationFrame,CustomEvent,clearInterval,clearTimeout,console);
//# sourceMappingURL=dom-data-bind.legacy.umd.min.js.map